#include <a_samp>
#include <a_mysql>
#include <Pawn.CMD>
#include <sscanf2>
#include <crashdetect>
#include <foreach>
#include <streamer>

#define MYSQL_HOST "127.0.0.1"
#define MYSQL_USER "gs60366"
#define MYSQL_PASS "wNEwLhYvwW"
#define MYSQL_BASE "gs60366"

#define SPD ShowPlayerDialog
#define SCM SendClientMessage
#define SCMB SetPlayerChatBubble
#define SAM SendAdminMessage
#define SCMTA SendClientMessageToAll

#define SPAWN_CARS 120

#define COLOR_LIGHTRED 0xFF2D2DAA
#define COLOR_RED 0xFF0000AA
#define COLOR_GREY 0x808080AA
#define COLOR_WHITE 0xFFFFFFAA
#define COLOR_NONRP 0xEBEB54AA
#define COLOR_ACHAT 0xE8CB00AA
#define COLOR_RPCHAT 0xDD90FFAA
#define COLOR_RPCHATDO 0x9F399AAA
#define COLOR_BLUE 0x00BFFFAA
#define COLOR_GREEN 0x00FF00AA


#define INFINITE 0x7F800000
#define MAX_LEVELS 50
#define MAX_REPORTS 1000

new MySQL: dbHandle;
new query[256];


enum
{
	DLG_NONE, //ммдемс вкусна
	DLG_REG,
	DLG_REG_GENDER,
	DLG_REG_AGE,
	DLG_OUTJOBM,
	DLG_LOGIN,
	DLG_CMD_MN,
	DLG_MENU_STAT,
	DLG_MENU_CMD,
	DLG_MENU_CMD_SHOW,
	DLG_ALOGIN,
	DLG_APANEL,
	DLG_REPORT,
	DLG_REP_LIST,
	DLG_ENTERJOBM,
	DLG_REP_LIST_TWO,
	DLG_REG_RACE,
	DLG_CHANGE_EMAIL,
	DLG_CREATE_EMAIL,
	DLG_AHELP,
	DLG_AHELP_CMD,
	DLG_QUESTS,
	DLG_MENU_CONFIG,
	DLG_TP,
	DLG_BAN,
	DLG_ANW,
	DLG_RADIO,
	DLG_DMKICK,
	DLG_WARNING,
	DLG_ARTISTS,
	DLG_SBORNIK,
	DLG_LOH,
	DLG_NOT,
	DLG_EMINEMMUSIC,
	DLG_MENU_CMD_CHAT,
	DLG_TSHLP,
	DLG_UNBAN,
	DLG_JOBMEN,
	DLG_OFFBAN,
	DLG_TROLL,
	DLG_AIR,
	DLG_GPS,
	DLG_OUT,
	DLG_MAINPLACES,
	DLG_KICK,
	DLG_PM,
	DLG_CMD1,
	DLG_CMD2,
	DLG_CMD3,
	DLG_CMD4,
	DLG_CMD5,
	DLG_CMD6,
	DLG_CMD7,
	DLG_PMD,
	DLG_OTVET,
	DLG_PMM,
	DLG_STYLE_MUTED,
	DLG_MUTEERR,
	DLG_JAILERR,
	DLG_JOBS,
	DLG_JAILSHOP,
};


new quest;

enum PLAYER_INFO 
{
	id,
	name[MAX_PLAYER_NAME + 1],
	pass[22 + 1],
	gender,
	age,
	skin,
    race,
	level,
	exp,
	money,
	hp,
	admin,
	apass,
	isemail,
	email[60],
	regip[15],
	regdate[11],
	isban,
	isonline,
	mins,
	muted,
	jailed,
	kills,
	deaths,
	jcoins,
	box,
	
};
new player_info[MAX_PLAYERS][PLAYER_INFO];

enum TEMP_INFO
{
	bool: aLogin,
	bool: report,
	afk,
	admunban[30],
	ofname[30],
	ofreason[64],
	ofcount,
	ofdata[30],
	ofsec,
};

enum BAN_INFO
{
	unbantime[11],
	unbandate,
	whoban[30],
	banreason[64],
};

new ban_info[MAX_PLAYERS][BAN_INFO];

new temp_info[MAX_PLAYERS][TEMP_INFO];

new bool: pLogin[MAX_PLAYERS];
new bool:onjobm[MAX_PLAYERS];
new reporttext[MAX_PLAYERS][100];
new reporttime[MAX_PLAYERS];
new rpID[MAX_PLAYERS];
new mineout[MAX_PLAYERS];
new bool:iskey[MAX_PLAYERS];
new bool:gruz[MAX_PLAYERS];
new Iterator:Admins<MAX_PLAYERS>;
new cmine[MAX_PLAYERS];


//new unband[MAX_PLAYERS];


main()
{
	print("\n---------------------------------------------------");
	print("------------Stay Wide Awake-------------");
	print("----------------------------------------\n");
}


new minejob;

public OnGameModeInit()
{
	dbHandle = mysql_connect(MYSQL_HOST, MYSQL_USER, MYSQL_PASS, MYSQL_BASE);
	if(mysql_errno() != 0)
	{
	    print("[MYSQL] Не удалось подключиться к БД");
		return SendRconCommand("exit");
	}
	else
	{
	    print("[MYSQL] Успешное подключение к БД");
	}
	mysql_set_charset("cp1251");
	mysql_log(ERROR | WARNING);
	SetGameModeText("Stay Wide Awake");
	SetTimer("MuniteUpdate",60000,true);
	CreateObject(1597, 1144.859497, -1756.123168, 15.215929, 0.000000, 0.000000, 0.000000, 300.00);
	CreateObject(1597, 1162.872558, -1756.168823, 15.268539, 0.000000, 0.000000, 0.000000, 300.00);
 	CreateObject(713, 1120.650878, -1728.278442, 12.160079, 0.000000, 0.000000, 0.000000, 300.00);
 	CreateObject(877, 1160.026977, -1725.783325, 12.773437, 0.000000, 0.000000, 0.000000, 300.00);
 	CreateObject(869, 1139.156127, -1728.900634, 13.213417, 0.000000, 0.000000, 0.000000, 300.00);
 	CreateObject(11470, 1130.261474, -1784.021606, 37.448570, 0.000000, 0.000000, 0.000000, 300.00);
    CreateObject(615, 1154.796386, -1728.165649, 8.923066, 0.000000, 0.000000, 0.000000, 300.00);
    CreateObject(16061, 1110.699096, -1723.851318, 12.263429, 0.000000, 2.500001, -93.300018, 300.00);
    CreateObject(1257, 1130.818481, -1747.648803, 13.858453, -0.099999, -0.099999, -93.200012, 300.00);
    CreateObject(617, 1149.324340, -1747.750854, 9.278321, 0.000000, 0.000000, 0.000000, 300.00);
    CreateObject(617, 1157.635986, -1747.833374, 9.952098, 0.000000, 0.000000, 0.000000, 300.00);
    CreateObject(3660, 1153.841064, -1747.293334, 14.480314, 0.000000, 0.000000, 0.000000, 300.00);
    CreateObject(19913, -1637.755249, -2221.240722, 35.593837, 0.000000, 0.000000, 0.000000, 300.00);
	CreateObject(19913, -1612.441772, -2246.397460, 35.495464, 0.000000, 0.000000, -89.400077, 300.00);
	CreateObject(19913, -1643.231689, -2270.666748, 35.585369, 0.000000, 0.000000, 0.000000, 300.00);
	CreateObject(19913, -1665.524414, -2245.929443, 35.572937, 0.000000, 0.000000, -96.399971, 300.00);
	CreateObject(19913, -1637.744384, -2221.231201, 24.730308, 0.000000, 0.000000, 0.000000, 300.00);
	CreateObject(19913, -1612.503051, -2246.479492, 24.527460, 0.000000, 0.000000, -89.199890, 300.00);
	CreateObject(19913, -1636.988281, -2270.840087, 35.407440, 0.000000, 0.000000, -0.799999, 300.00);
    CreateObject(3522, 1791.01990, -1922.61536, 12.43570,   0.00000, 0.00000, 180.00000);
	CreateObject(3522, 1792.43884, -1904.92273, 12.43570,   0.00000, 0.00000, 0.00000);
	CreateObject(808, 1792.56372, -1906.68091, 13.78823,   0.00000, 0.00000, 325.80707);
	CreateObject(808, 1790.80481, -1920.86780, 13.78820,   0.00000, 0.00000, 180.00000);
	CreateObject(19381, 1756.17786, -1886.86243, 12.50480,   0.00000, 90.00000, 0.00000);
	CreateObject(715, 1760.44714, -1890.00000, 20.81220,   0.00000, 0.00000, 0.00000);
	CreateObject(14400, 1754.84033, -1889.57166, 13.03850,   0.00000, 0.00000, 0.00000);
	CreateObject(673, 1754.15332, -1885.60645, 3.17810,   0.00000, 0.00000, 321.38559);
	CreateObject(867, 1758.59277, -1886.69409, 12.81272,   0.00000, 0.00000, 0.00000);
	CreateObject(1549, 1766.44446, -1884.17090, 12.53635,   0.00000, 0.00000, 0.00000);
	CreateObject(8843, 1796.05273, -1913.73035, 12.41680,   -0.04000, 0.00000, 180.00000);
	CreateObject(8843, 1787.88696, -1913.73035, 12.41680,   -0.04000, 0.00000, 0.00000);
	CreateObject(10183, 1778.18323, -1925.48926, 12.43160,   0.00000, 0.00000, 135.33330);
	CreateObject(1319, 1774.47058, -1910.38831, 12.90486,   0.00000, 0.00000, 0.00000);
	CreateObject(1319, 1774.45325, -1915.40515, 12.90486,   0.00000, 0.00000, 0.00000);
	CreateObject(1319, 1774.43433, -1920.44568, 12.90486,   0.00000, 0.00000, 0.00000);
	CreateObject(1319, 1774.44885, -1925.51758, 12.90486,   0.00000, 0.00000, 0.00000);
	CreateObject(1319, 1774.52100, -1930.52588, 12.90486,   0.00000, 0.00000, 0.00000);
	CreateObject(1319, 1774.46375, -1935.44800, 12.90486,   0.00000, 0.00000, 0.00000);
	CreateObject(7033, 1762.07935, -1919.97241, 17.02380,   0.00000, 0.00000, 90.00000);
	CreateObject(0, 1767.61060, -1915.18604, 12.65440,   0.00000, 0.00000, 270.00000);
	CreateObject(3522, 1791.46436, -1904.94116, 12.43570,   0.00000, 0.00000, 180.00000);
	CreateObject(3522, 1792.13464, -1922.61621, 12.43570,   0.00000, 0.00000, 0.00000);
	CreateObject(808, 1791.67334, -1924.22778, 13.98310,   0.00000, 0.00000, 0.00000);
	CreateObject(808, 1792.00110, -1903.28333, 13.78070,   0.00000, 0.00000, 0.00000);
	CreateObject(19866, 1754.57263, -1891.71521, 12.57690,   0.00000, 0.00000, 90.00000);
	CreateObject(19866, 1758.97021, -1891.71521, 12.57690,   0.00000, 0.00000, 90.00000);
	CreateObject(19866, 1761.36719, -1884.12207, 12.57690,   0.00000, 0.00000, 0.00000);
	CreateObject(19866, 1761.36719, -1889.12280, 12.57690,   0.00000, 0.00000, 0.00000);
	CreateObject(970, 1768.20728, -1907.12952, 13.01290,   0.00000, 0.00000, 0.00000);
	CreateObject(970, 1772.29443, -1907.12952, 13.01290,   0.00000, 0.00000, 0.00000);
	CreateObject(970, 1774.34534, -1905.03674, 13.01290,   0.00000, 0.00000, 90.00000);
	CreateObject(970, 1774.34534, -1900.92676, 13.01290,   0.00000, 0.00000, 90.00000);
	CreateObject(970, 1774.34534, -1885.76013, 13.01290,   0.00000, 0.00000, 90.00000);
	CreateObject(970, 1774.34534, -1889.86646, 13.01290,   0.00000, 0.00000, 90.00000);
	CreateObject(970, 1774.34534, -1891.90295, 13.01290,   0.00000, 0.00000, 90.00000);
	CreateObject(1215, 1774.16785, -1897.99829, 13.06720,   0.00000, 0.00000, 0.00000);
	CreateObject(1215, 1774.16785, -1896.42493, 13.06720,   0.00000, 0.00000, 0.00000);
	CreateObject(1215, 1774.16785, -1894.91211, 13.06720,   0.00000, 0.00000, 0.00000);
	CreateObject(3657, 1763.78320, -1884.01770, 13.06190,   0.00000, 0.00000, 0.00000);
	CreateObject(18761, 1811.12854, -1890.06433, 13.72770,   0.00000, 0.00000, 91.00000);
	CreateObject(2984, 1751.67590, -1925.46106, 13.87830,   0.00000, 0.00000, 0.00000);
	CreateObject(5421, 1023.57800, -1942.78918, 15.00000,   0.00000, -1.00000, 0.00000);
	CreateObject(700, 1035.46399, -1948.41028, 12.02304,   0.00000, 0.00000, 0.00000);
	CreateObject(1447, 1011.91321, -1941.33252, 12.50450,   0.00000, 0.00000, -90.00000);
	CreateObject(713, 993.73309, -1951.16748, 6.33620,   0.00000, 0.00000, 1.00000);
	CreateObject(713, 984.86493, -1907.26001, 7.82040,   0.00000, 0.00000, -70.00000);
	CreateObject(1447, 1011.90332, -1946.53186, 12.50450,   0.00000, 0.00000, -90.00000);
	CreateObject(1447, 1011.90991, -1951.79346, 12.50450,   0.00000, 0.00000, -90.00000);
	CreateObject(1447, 1014.56750, -1954.47656, 12.50450,   0.00000, 0.00000, 0.00000);
	CreateObject(1447, 1019.13501, -1952.63599, 12.50450,   0.00000, 0.00000, 45.00000);
	CreateObject(1440, 1011.17120, -1935.20984, 11.64200,   0.00000, 0.00000, -90.00000);
	CreateObject(1440, 1011.15564, -1937.94055, 11.64200,   0.00000, 0.00000, -90.00000);
	CreateObject(1418, 1035.95203, -1951.30127, 12.56130,   0.00000, 0.00000, 0.00000);
	CreateObject(1418, 1032.49243, -1951.33044, 12.56130,   0.00000, 0.00000, 0.00000);
	CreateObject(1418, 1037.74207, -1949.58362, 12.56130,   0.00000, 0.00000, 90.00000);
	CreateObject(1418, 1037.74207, -1949.58362, 12.56130,   0.00000, 0.00000, 90.00000);
	CreateObject(1418, 1037.75024, -1947.82129, 12.56130,   0.00000, 0.00000, 90.00000);
	CreateObject(1418, 1037.98669, -1941.45813, 12.56130,   0.00000, 0.00000, 88.00000);
	CreateObject(2000, 1019.07581, -1933.22278, 11.29450,   0.00000, 0.00000, 180.00000);
	CreateObject(1412, 1021.53033, -1933.44910, 12.67536,   0.00000, 0.00000, 0.00000);
	CreateObject(1412, 1026.73096, -1933.44897, 12.67536,   0.00000, 0.00000, 0.00000);
	CreateObject(1412, 1031.91052, -1933.43738, 12.67540,   0.00000, 0.00000, 0.00000);
	CreateObject(1412, 1035.39014, -1933.43347, 12.67540,   0.00000, 0.00000, 0.00000);
	CreateObject(1281, 1015.65179, -1952.02734, 12.35240,   0.00000, 0.00000, 0.00000);
	CreateObject(1498, 1028.37427, -1945.80652, 12.47710,   0.00000, 0.00000, 90.00000);
	CreateObject(2957, 1018.67822, -1936.19275, 12.89520,   0.00000, 0.00000, 90.00000);
	CreateObject(3520, 1037.24304, -1948.33997, 12.06560,   0.00000, 0.00000, 0.00000);
	CreateObject(3520, 1034.72314, -1950.39148, 12.06560,   0.00000, 0.00000, 90.00000);
	CreateObject(638, 1032.88074, -1941.70435, 12.67230,   0.00000, 0.00000, 0.00000);
	CreateObject(3639, 1018.10754, -1924.32056, 15.75490,   0.00000, 0.00000, 90.00000);
	CreateObject(1418, 1038.05566, -1931.71667, 12.56130,   0.00000, 0.00000, 88.00000);
	CreateObject(1418, 1037.89636, -1921.06128, 12.56130,   0.00000, 0.00000, 92.00000);
	CreateObject(1418, 1037.75623, -1917.60095, 12.56130,   0.00000, 0.00000, 92.00000);
	CreateObject(1418, 1037.62317, -1914.13110, 12.56130,   0.00000, 0.00000, 92.00000);
	CreateObject(1418, 1035.80286, -1912.35168, 12.56130,   0.00000, 0.00000, 180.00000);
	CreateObject(1418, 1032.33423, -1912.36523, 12.56130,   0.00000, 0.00000, 180.00000);
	CreateObject(1418, 1028.83362, -1912.38232, 12.56130,   0.00000, 0.00000, 180.00000);
	CreateObject(1418, 1021.86072, -1912.44849, 12.34130,   0.00000, 0.00000, 180.00000);
	CreateObject(1418, 1025.31287, -1912.41772, 12.48130,   0.00000, 0.00000, 180.00000);
	CreateActor(6,1161.4216,-1753.3746,13.6029,90);
	CreateActor(16,-1868.7430,-1622.1987,21.8560,270);
	Create3DTextLabel("{FFFF00}Начальные квесты", COLOR_WHITE, 1161,-1753.4297,13.6035, 25.0 , 0, 1);
	quest = CreatePickup(1239, 23, 1161,-1753.4297,13.6035, 0);
	minejob = CreatePickup(1239, 23, -1867.3292,-1622.1987,21.8560, 0);
	Create3DTextLabel("Трудоустройство", COLOR_BLUE, -1867.3292,-1622.1987,21.8560, 25.0 , 0, 1);
	CreateObject(1418, 1018.43103, -1912.42114, 12.24130,   0.00000, 0.00000, 180.00000);
	CreateObject(1418, 1015.00812, -1912.42566, 12.16130,   0.00000, 0.00000, 180.00000);
	CreateObject(1418, 1013.22662, -1912.46436, 12.16130,   0.00000, 0.00000, 0.00000);
	CreateObject(638, 1024.83215, -1918.46313, 12.43230,   0.00000, 0.00000, 0.00000);
	CreateObject(638, 1024.82642, -1921.72131, 12.45230,   0.00000, 0.00000, 0.00000);
	CreateObject(1280, 1025.42578, -1939.90161, 12.17530,   0.00000, 0.00000, -90.00000);
	CreateObject(1280, 1021.78162, -1929.00842, 12.17530,   0.00000, 0.00000, 180.00000);
	CreateObject(3520, 1037.38147, -1920.25159, 12.06560,   0.00000, 0.00000, 0.00000);
	CreateObject(3520, 1037.19324, -1915.56372, 12.06560,   0.00000, 0.00000, 0.00000);
	CreateObject(3520, 1034.57324, -1912.83215, 12.06560,   0.00000, 0.00000, 90.00000);
	CreateObject(3520, 1029.82837, -1912.90051, 11.90560,   0.00000, 0.00000, 90.00000);
	CreateObject(3520, 1025.28003, -1912.97351, 11.76560,   0.00000, 0.00000, 90.00000);
	CreateObject(3520, 1020.43140, -1912.93481, 11.64560,   -0.04000, 0.00000, 90.00000);
	CreateObject(3520, 1016.33221, -1913.07129, 11.44560,   0.00000, 0.00000, 90.00000);
	CreateObject(3520, 1014.31073, -1913.19092, 11.38560,   0.00000, 0.00000, 90.00000);
	CreateObject(615, 1031.48621, -1917.87134, 11.92812,   0.00000, 0.00000, 0.00000);
	CreateObject(3618, 1021.05817, -1901.48401, 14.27570,   -2.00000, 0.00000, 90.00000);
	CreateObject(700, 1025.95715, -1901.75098, 12.02304,   0.00000, 0.00000, 0.00000);
	CreateObject(1408, 1027.96704, -1901.98511, 12.47600,   0.00000, 0.00000, 90.00000);
	CreateObject(1408, 1025.36340, -1899.21875, 12.47600,   0.00000, 0.00000, 180.00000);
	CreateObject(870, 1025.77100, -1900.56372, 12.07760,   0.00000, 0.00000, 135.00000);
	CreateObject(870, 1025.94946, -1903.30737, 12.07760,   0.00000, 0.00000, -62.00000);
	CreateObject(1418, 1037.43872, -1910.54590, 12.56130,   0.00000, 0.00000, -88.00000);
	CreateObject(1418, 1037.32825, -1907.07007, 12.56330,   0.00000, 0.00000, -88.00000);
	CreateObject(1418, 1037.20935, -1903.60840, 12.56330,   0.00000, 0.00000, -88.00000);
	CreateObject(1418, 1037.08789, -1900.14856, 12.56330,   0.00000, 0.00000, -88.00000);
	CreateObject(1418, 1035.19421, -1890.46606, 12.56330,   0.00000, 0.00000, 180.00000);
	CreateObject(1418, 1031.71155, -1890.47766, 12.56330,   0.00000, 0.00000, 180.00000);
	CreateObject(1418, 1028.26978, -1890.45496, 12.56330,   0.00000, 0.00000, 180.00000);
	CreateObject(1418, 1024.76489, -1890.43884, 12.50330,   0.00000, 0.00000, 180.00000);
	CreateObject(1418, 1021.31921, -1890.43945, 12.40330,   0.00000, 0.00000, 180.00000);
	CreateObject(1418, 1017.85278, -1890.45056, 12.32330,   0.00000, 0.00000, 180.00000);
	CreateObject(1418, 1014.42999, -1890.46484, 12.20330,   0.00000, 0.00000, 180.00000);
	CreateObject(1418, 1012.53003, -1890.50476, 12.20330,   0.00000, 0.00000, 0.00000);
	CreateObject(3520, 1029.76819, -1911.35522, 11.92560,   0.00000, 0.00000, 90.00000);
	CreateObject(3520, 1036.86414, -1909.23560, 12.06560,   0.00000, 0.00000, 0.00000);
	CreateObject(3520, 1036.79932, -1904.67578, 12.06560,   0.00000, 0.00000, 0.00000);
	CreateObject(3520, 1036.61365, -1900.78247, 12.06560,   0.00000, 0.00000, 0.00000);
	CreateObject(3520, 1034.47412, -1911.44226, 12.06560,   0.00000, 0.00000, 90.00000);
	CreateObject(3520, 1025.36755, -1911.46558, 11.76560,   0.00000, 0.00000, 90.00000);
	CreateObject(3520, 1021.04352, -1911.35156, 11.60560,   0.00000, 0.00000, 90.00000);
	CreateObject(3520, 1016.60822, -1911.47168, 11.42560,   0.00000, 0.00000, 90.00000);
	CreateObject(3520, 1014.11920, -1911.50952, 11.40560,   0.00000, 0.00000, 90.00000);
	CreateObject(3520, 1036.13818, -1885.88037, 12.06560,   0.00000, 0.00000, 0.00000);
	CreateObject(713, 1022.00000, 1024.00000, -1836.00000,   0.00000, 0.00000, 0.00000);
	CreateObject(3558, 2384.94531, -1708.76563, 15.50781,   356.85840, 0.00000, 0.00000);
	CreateObject(3558, 1021.71570, -1882.10828, 14.47730,   2.00000, 0.00000, -90.00000);
	CreateObject(1418, 1036.82104, -1888.68787, 12.56330,   0.00000, 0.00000, -88.00000);
	CreateObject(1418, 1036.69592, -1885.22632, 12.56330,   0.00000, 0.00000, -88.00000);
	CreateObject(1418, 1036.59888, -1873.15393, 12.92330,   0.00000, 0.00000, -89.00000);
	CreateObject(1418, 1034.76953, -1871.47144, 12.92330,   0.00000, 0.00000, 0.00000);
	CreateObject(1418, 1031.32080, -1871.47864, 12.92330,   0.00000, 0.00000, 0.00000);
	CreateObject(1418, 1027.88110, -1871.48706, 12.78330,   0.00000, 0.00000, 0.00000);
	CreateObject(1418, 1024.41809, -1871.49048, 12.74330,   0.00000, 0.00000, 0.00000);
	CreateObject(1418, 1020.95752, -1871.50183, 12.64330,   0.00000, 0.00000, 0.00000);
	CreateObject(1418, 1017.49701, -1871.50403, 12.56330,   0.00000, 0.00000, 0.00000);
	CreateObject(1418, 1014.05530, -1871.52209, 12.42330,   0.00000, 0.00000, 0.00000);
	CreateObject(1418, 1010.59540, -1871.52771, 12.36330,   0.00000, 0.00000, 0.00000);
	CreateObject(1281, 1013.07825, -1887.31287, 12.35410,   0.00000, 0.00000, 90.00000);
	CreateObject(3520, 1034.51831, -1889.58508, 12.06560,   0.00000, 0.00000, 275.00000);
	CreateObject(3520, 1029.40198, -1889.91528, 12.06560,   0.00000, 0.00000, 275.00000);
	CreateObject(729, 1031.50549, -1886.02905, 12.04640,   0.00000, 0.00000, 0.00000);
	CreateObject(638, 1025.99512, -1887.73596, 12.55230,   0.00000, 0.00000, 0.00000);
	CreateObject(638, 1026.00256, -1884.59546, 12.55230,   0.00000, 0.00000, 0.00000);
	CreateObject(870, 1031.74988, -1885.74097, 12.33760,   0.00000, 0.00000, 135.00000);
	CreateObject(4021, 1022.03992, -1853.34338, 18.68600,   -1.00000, -0.68000, 91.00000);
	CreateObject(615, 1020.85583, -1833.42676, 11.92812,   0.00000, 0.00000, 0.00000);
	CreateObject(615, 1012.30829, -1824.02576, 11.92810,   0.00000, 0.00000, 68.00000);
	CreateObject(729, 1007.19019, -1837.63501, 12.04640,   0.00000, 0.00000, 0.00000);
	CreateObject(3520, 1035.91833, -1862.55322, 12.60560,   0.00000, 0.00000, 0.00000);
	CreateObject(3520, 1036.06921, -1857.71948, 12.60560,   0.00000, 0.00000, 4.00000);
	CreateObject(3520, 1035.80005, -1845.55725, 12.60560,   0.00000, 0.00000, 4.00000);
	CreateObject(3520, 1034.58154, -1841.10645, 12.60560,   0.00000, 0.00000, 22.00000);
	CreateObject(3520, 1032.95337, -1836.99988, 12.64560,   0.00000, 0.00000, 22.00000);
	CreateObject(3520, 1030.61597, -1832.99963, 12.80560,   0.00000, 0.00000, 44.00000);
	CreateObject(3520, 1027.69446, -1829.45032, 12.86560,   0.00000, 0.00000, 44.00000);
	CreateObject(3520, 1023.90289, -1826.66785, 12.96560,   0.00000, 0.00000, 62.00000);
	CreateObject(3520, 1019.79108, -1824.65698, 12.96560,   0.00000, 0.00000, 68.00000);
	CreateObject(3520, 1015.65057, -1822.53210, 12.96560,   0.00000, 0.00000, 68.00000);
	CreateObject(3520, 1013.26300, -1821.19116, 12.96560,   0.00000, 0.00000, 68.00000);
	CreateObject(970, 1010.73712, -1821.63269, 13.64040,   0.00000, -2.00000, 70.00000);
	CreateObject(970, 1009.40491, -1825.51050, 13.50040,   0.00000, -2.00000, 72.00000);
	CreateObject(970, 1008.11859, -1829.46143, 13.36040,   0.00000, -2.00000, 72.00000);
	CreateObject(970, 1006.83759, -1833.41125, 13.22040,   0.00000, -2.00000, 72.00000);
	CreateObject(970, 1005.87598, -1836.34766, 13.12040,   0.00000, -2.00000, 72.00000);
	CreateObject(3520, 1010.73419, -1823.19922, 12.96560,   0.00000, 0.00000, 162.00000);
	CreateObject(3520, 1009.24207, -1827.36084, 12.96560,   0.00000, 0.00000, 162.00000);
	CreateObject(3520, 1006.59991, -1836.01428, 12.96560,   0.00000, 0.00000, 162.00000);
	CreateObject(3520, 1007.90472, -1831.60010, 12.96560,   0.00000, 0.00000, 162.00000);
	CreateObject(970, 1007.11792, -1839.22498, 13.02710,   0.00000, 0.00000, -26.00000);
	CreateObject(970, 1010.81543, -1841.02051, 13.02710,   0.00000, 0.00000, -26.00000);
	CreateObject(970, 1014.53510, -1842.83325, 13.02710,   0.00000, 0.00000, -26.00000);
	CreateObject(3520, 1008.02197, -1838.80322, 12.96560,   0.00000, 0.00000, 69.00000);
	CreateObject(3520, 1011.54614, -1840.38428, 12.96560,   0.00000, 0.00000, 69.00000);
	CreateObject(1280, 1028.37207, -1907.42419, 12.29530,   0.00000, 0.00000, 180.00000);
	CreateObject(2957, 1019.47601, -1894.35364, 12.21520,   0.00000, 0.00000, 90.00000);
	CreateObject(2957, 1014.31580, -1894.31128, 12.15520,   0.00000, 0.00000, 90.00000);
	CreateObject(970, 1031.72168, -1865.50171, 12.86200,   0.00000, -1.00000, 0.00000);
	CreateObject(970, 1034.30005, -1865.50208, 12.90200,   0.00000, -1.00000, 0.00000);
	CreateObject(3520, 1032.33850, -1864.65234, 12.60560,   0.00000, 0.00000, 90.00000);
	CreateObject(1412, 1014.58105, -1868.86243, 12.67540,   0.00000, 0.00000, 88.00000);
	CreateObject(1412, 1014.76392, -1863.66235, 12.67540,   0.00000, 0.00000, 88.00000);
	CreateObject(910, 2557.34912, -1730.66797, 1.91, 358.75, 0, 90); // ?????? 0
	CreateObject(2926, 2557.56201, -1732.453, 0.616, 0, 0, 282); // ?????? 1
	CreateObject(2925, 2557.573, -1733.38904, 0.491, 1.467, 12.004, 265.688); // ?????? 2
	CreateObject(1357, 2557.60791, -1734.80896, 0.908, 0, 2, 98); // ?????? 3
	CreateObject(12957, 2573.80688, -1733.58496, 1.519, 0, 0, 22); // ?????? 4
	CreateObject(1334, 2574.69702, -1729.09204, 1.453, 0, 0, 68); // ?????? 5
	CreateObject(2676, 2564.37305, -1732.17102, 0.744, 0, 0, 0); // ?????? 6
	CreateObject(2677, 2567.99805, -1728.521, 0.913, 0, 0, 0); // ?????? 7
	CreateObject(2968, 2557.66089, -1729.02405, 0.937, 0, 0, 0); // ?????? 8
	CreateObject(3005, 2573.30103, -1732.36902, 1.391, 0, 0, 0); // ?????? 9
	CreateObject(2971, 2574.7251, -1726.70898, 0.641, 0, 0, 0); // ?????? 10
	CreateObject(3119, 2556.46704, -1739.74402, 0.944, 0, 0, 214); // ?????? 11
	CreateObject(3006, 2558.62598, -1726.28503, 0.641, 0, 0, 0); // ?????? 12
	CreateObject(3005, 2562.53003, -1728.50598, 0.641, 0, 0, 0); // ?????? 13
	CreateObject(2890, 2558.77588, -1718.28894, 0.641, 0, 0, 0); // ?????? 14
	CreateObject(1264, 2559.21899, -1717.37903, 2.666, 0, 0, 0); // ?????? 15
	CreateObject(1264, 2558.12988, -1717.46899, 2.666, 0, 0, 0); // ?????? 16
	CreateObject(1264, 2558.71997, -1716.47998, 2.666, 0, 0, 0); // ?????? 17
	CreateObject(1358, 2573.03003, -1739.50806, 1.844, 0, 0, 0); // ?????? 18
	CreateObject(1450, 2573.41211, -1728.95703, 1.241, 0, 0, 250); // ?????? 19
	new tmpobjid;
	CreateObject(3698, 2410.13208, -1642.05286, 15.16800,   0.00000, 0.00000, 90.00000);
	CreateObject(3698, 2424.62280, -1634.08716, 15.16800,   0.00000, 0.00000, 0.00000);
	CreateObject(19377, 2428.37720, -1644.17542, 12.46800,   0.00000, 90.00000, 0.00000);
	CreateObject(19377, 2428.37720, -1634.58789, 12.46800,   0.00000, 90.00000, 0.00000);
	CreateObject(19377, 2417.99316, -1644.17517, 12.46800,   0.00000, 90.00000, 0.00000);
	CreateObject(19377, 2417.99316, -1634.58789, 12.46800,   0.00000, 90.00000, 0.00000);
	CreateObject(19353, 2418.39966, -1643.80969, 10.81400,   0.00000, 0.00000, 0.00000);
	CreateObject(1412, 2413.21460, -1648.95007, 13.72990,   0.00000, 0.00000, 0.00000);
	CreateObject(1412, 2418.04419, -1646.38965, 13.72990,   0.00000, 0.00000, 90.00000);
	CreateObject(1412, 2418.04419, -1644.65820, 13.72990,   0.00000, 0.00000, 90.00000);
	CreateObject(1412, 2420.68018, -1642.07800, 13.72990,   0.00000, 0.00000, 0.00000);
	CreateObject(1412, 2427.47046, -1642.07800, 13.72990,   0.00000, 0.00000, 0.00000);
	CreateObject(1412, 2431.07251, -1642.07800, 13.72990,   0.00000, 0.00000, 0.00000);
	CreateObject(1412, 2433.56543, -1637.03943, 13.75790,   0.00000, 0.00000, 90.00000);
	CreateObject(1412, 2433.56543, -1632.43921, 13.75790,   0.00000, 0.00000, 90.00000);
	CreateObject(19445, 2423.29785, -1642.29297, 10.81400,   0.00000, 0.00000, 90.00000);
	CreateObject(19353, 2420.96631, -1643.80969, 10.81400,   0.00000, 0.00000, 0.00000);
	CreateObject(19353, 2423.66797, -1643.80969, 10.81400,   0.00000, 0.00000, 0.00000);
	CreateObject(19353, 2426.30640, -1643.81213, 10.81400,   0.00000, 0.00000, 0.00000);
	CreateObject(19353, 2429.71094, -1642.29370, 10.81400,   0.00000, 0.00000, 90.00000);
	CreateObject(19353, 2429.03271, -1643.81213, 10.81400,   0.00000, 0.00000, 0.00000);
	CreateObject(19426, 2431.08496, -1642.29370, 10.81400,   0.00000, 0.00000, 90.00000);
	CreateObject(19353, 2431.83008, -1643.81213, 10.81400,   0.00000, 0.00000, 0.00000);
	CreateObject(1412, 2433.61914, -1644.70850, 13.75790,   0.00000, 0.00000, 90.00000);
	CreateObject(19377, 2411.38452, -1634.95190, 12.46600,   0.00000, 90.00000, 0.00000);
	CreateObject(19377, 2411.38452, -1644.17542, 12.47000,   0.00000, 90.00000, 0.00000);
	CreateObject(1432, 2415.06372, -1631.36121, 12.63680,   0.00000, 0.00000, 0.00000);
	CreateObject(1712, 2411.90918, -1633.63342, 12.55290,   0.00000, 0.00000, -149.00000);
	CreateObject(1764, 2409.54663, -1634.63818, 12.55290,   0.00000, 0.00000, -200.00000);
	CreateObject(1769, 2407.77710, -1631.97583, 12.55290,   0.00000, 0.00000, 54.00000);
	CreateObject(2030, 2409.72510, -1632.53796, 12.93090,   0.00000, 0.00000, 0.00000);
	CreateObject(1412, 2407.05957, -1632.72424, 13.72990,   0.00000, 0.00000, 90.00000);
	CreateObject(1327, 2418.92847, -1637.34741, 13.32100,   0.00000, 6.00000, 90.00000);
	CreateObject(1280, 2413.77441, -1642.97266, 12.93700,   0.00000, 0.00000, 180.00000);
	CreateObject(1280, 2423.72852, -1637.69983, 12.93700,   0.00000, 0.00000, 90.00000);
	CreateObject(1517, 2414.64014, -1631.44470, 13.45800,   0.00000, 0.00000, 25.00000);
	CreateObject(1509, 2414.82324, -1631.20154, 13.45800,   0.00000, 0.00000, -91.00000);
	CreateObject(1509, 2415.09741, -1631.43298, 13.45800,   0.00000, 0.00000, -91.00000);
	CreateObject(1509, 2410.01709, -1632.74634, 13.51900,   0.00000, 0.00000, 0.00000);
	CreateObject(1509, 2409.79565, -1632.90417, 13.51900,   0.00000, 0.00000, 0.00000);
	CreateObject(1509, 2409.15552, -1632.12683, 13.51900,   0.00000, 0.00000, 105.00000);
	CreateObject(1509, 2409.32007, -1632.17749, 13.51900,   0.00000, 0.00000, 105.00000);
	CreateObject(2860, 2409.88867, -1632.37415, 13.32850,   0.00000, 0.00000, 0.00000);
	CreateObject(2866, 2415.38843, -1631.31091, 13.25270,   0.00000, 0.00000, 98.00000);
	CreateObject(2671, 2411.39478, -1631.88306, 12.56380,   0.00000, 0.00000, 0.00000);
	CreateObject(2670, 2416.18140, -1633.39624, 12.63800,   0.00000, 0.00000, 0.00000);
	CreateObject(2840, 2412.90454, -1633.91895, 12.56610,   0.00000, 0.00000, -91.00000);
	CreateObject(1415, 2417.06445, -1631.13391, 12.55780,   0.00000, 0.00000, -90.00000);
	CreateObject(1227, 2408.49487, -1649.66980, 13.36200,   0.00000, 0.00000, 0.00000);
	CreateObject(1227, 2411.70459, -1649.68567, 13.36200,   0.00000, 0.00000, 0.00000);
	CreateObject(1440, 2432.49854, -1636.68176, 13.02600,   0.00000, 0.00000, 84.00000);
 	tmpobjid = CreateObject(19463, 2323.225097, -1906.359741, 14.126000, 0.000000, 0.000000, 0.000000, 1000.00);
    SetObjectMaterial(tmpobjid, 0, 6282, "beafron2_law2", "comptwall33", 0x00000000);
    tmpobjid = CreateObject(19463, 2323.225097, -1896.802978, 14.126000, 0.000000, 0.000000, 0.000000, 1000.00);
    SetObjectMaterial(tmpobjid, 0, 6282, "beafron2_law2", "comptwall33", 0x00000000);
    tmpobjid = CreateObject(19463, 2323.246093, -1888.822875, 14.126000, 0.000000, 0.000000, 0.000000, 1000.00);
    SetObjectMaterial(tmpobjid, 0, 6282, "beafron2_law2", "comptwall33", 0x00000000);
    tmpobjid = CreateObject(19463, 2323.225097, -1920.367309, 14.126000, 0.000000, 0.000000, 0.000000, 1000.00);
    SetObjectMaterial(tmpobjid, 0, 6282, "beafron2_law2", "comptwall33", 0x00000000);
    tmpobjid = CreateObject(19463, 2323.225097, -1929.980102, 14.126000, 0.000000, 0.000000, 0.000000, 1000.00);
    SetObjectMaterial(tmpobjid, 0, 6282, "beafron2_law2", "comptwall33", 0x00000000);
    tmpobjid = CreateObject(19463, 2323.225097, -1939.574096, 14.126000, 0.000000, 0.000000, 0.000000, 1000.00);
    SetObjectMaterial(tmpobjid, 0, 6282, "beafron2_law2", "comptwall33", 0x00000000);
    tmpobjid = CreateObject(1412, 2301.169677, -1904.380981, 13.769000, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(1413, 2303.737548, -1906.965332, 13.769000, 0.000000, 0.000000, 90.000000, 1000.00);
    tmpobjid = CreateObject(1412, 2303.737548, -1912.168334, 13.769000, 0.000000, 0.000000, 90.000000, 1000.00);
    tmpobjid = CreateObject(1447, 2303.737548, -1922.569335, 13.663999, 0.000000, 0.000000, 90.000000, 1000.00);
    tmpobjid = CreateObject(1412, 2303.737548, -1927.670776, 13.769000, 0.000000, 0.000000, 90.000000, 1000.00);
    tmpobjid = CreateObject(1412, 2303.737548, -1931.772216, 13.769000, 0.000000, 0.000000, 90.000000, 1000.00);
    tmpobjid = CreateObject(1412, 2301.142578, -1934.330078, 13.769000, 0.000000, 0.000000, 180.000000, 1000.00);
    tmpobjid = CreateObject(1412, 2301.175048, -1940.993896, 13.769000, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(1412, 2285.882568, -1940.993896, 13.769000, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(1413, 2291.064453, -1940.993896, 13.769000, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(1412, 2271.266601, -1940.993896, 13.769000, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(1412, 2256.125000, -1940.993896, 13.769000, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(1413, 2250.902587, -1940.933959, 13.769000, 0.000000, 0.000000, 180.000000, 1000.00);
    tmpobjid = CreateObject(1412, 2237.499023, -1940.997436, 13.769000, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(3584, 2354.893798, -1906.127563, 16.916000, 0.000000, 0.000000, -0.500000, 1000.00);
    tmpobjid = CreateObject(3698, 2333.257812, -1904.308593, 15.168000, 0.000000, 0.000000, 90.000000, 1000.00);
    tmpobjid = CreateObject(3698, 2332.062988, -1888.557006, 15.168000, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(669, 2301.792480, -1907.346191, 12.478500, 3.000000, 0.000000, -98.000000, 1000.00);
    tmpobjid = CreateObject(1440, 2292.326416, -1908.527954, 13.000000, 0.000000, 0.000000, 113.000000, 1000.00);
    tmpobjid = CreateObject(1227, 2299.848876, -1903.616210, 13.336000, 0.000000, 0.000000, 180.000000, 1000.00);
    tmpobjid = CreateObject(2671, 2290.871337, -1901.909179, 12.590000, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(2671, 2296.229980, -1911.071655, 12.590000, 0.000000, 0.000000, 33.000000, 1000.00);
    tmpobjid = CreateObject(2671, 2296.767333, -1938.677856, 12.590000, 0.000000, 0.000000, 33.000000, 1000.00);
    tmpobjid = CreateObject(2671, 2295.499267, -1928.829711, 12.590000, 0.000000, 0.000000, 33.000000, 1000.00);
    tmpobjid = CreateObject(2671, 2300.499023, -1902.174194, 12.611000, 0.000000, 0.000000, 33.000000, 1000.00);
    tmpobjid = CreateObject(1265, 2301.544189, -1903.841552, 13.026000, 0.000000, 0.000000, -236.000000, 1000.00);
    tmpobjid = CreateObject(1265, 2301.548095, -1902.930419, 13.046999, 0.000000, 0.000000, -171.000000, 1000.00);
    tmpobjid = CreateObject(1358, 2291.912109, -1931.437011, 13.727000, 0.000000, 0.000000, 40.000000, 1000.00);
    tmpobjid = CreateObject(18661, 2323.133056, -1907.865356, 14.399999, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(18661, 2291.458984, -1913.693359, 14.600000, 0.000000, 0.000000, 180.000000, 1000.00);
    tmpobjid = CreateObject(2669, 2301.252441, -1931.003784, 13.829999, 0.000000, 0.000000, -164.000000, 1000.00);
    tmpobjid = CreateObject(2754, 2324.018798, -1909.133544, 12.970000, 90.000000, 0.000000, 180.000000, 1000.00);
    tmpobjid = CreateObject(1793, 2301.848632, -1933.525756, 12.564499, 0.000000, 0.000000, 18.000000, 1000.00);
    tmpobjid = CreateObject(1481, 2301.943115, -1927.377075, 13.255000, 0.000000, 0.000000, -135.000000, 1000.00);
    tmpobjid = CreateObject(1481, 2302.740234, -1913.291259, 13.255000, 0.000000, 0.000000, -98.000000, 1000.00);
    tmpobjid = CreateObject(1481, 2341.607910, -1902.136230, 13.255000, 0.000000, 0.000000, 4.000000, 1000.00);
    tmpobjid = CreateObject(1432, 2341.139892, -1904.818237, 12.700499, 0.000000, 0.000000, -55.000000, 1000.00);
    tmpobjid = CreateObject(2838, 2341.138427, -1904.912963, 13.314000, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(1413, 2339.863525, -1911.209594, 13.769000, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(1412, 2328.851318, -1911.237548, 13.769000, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(852, 2301.695312, -1918.682495, 12.539999, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(2121, 2301.830566, -1929.119873, 13.031999, 0.000000, 0.000000, -98.000000, 1000.00);
    tmpobjid = CreateObject(2860, 2300.312988, -1912.015991, 13.315999, 0.000000, 0.000000, -25.000000, 1000.00);
    tmpobjid = CreateObject(1349, 2292.060791, -1915.635253, 13.095999, 0.000000, 0.000000, 113.000000, 1000.00);
    tmpobjid = CreateObject(2672, 2299.574707, -1914.323974, 12.885999, 0.000000, 0.000000, -98.000000, 1000.00);
    tmpobjid = CreateObject(2676, 2299.421386, -1927.107055, 12.692000, 0.000000, 0.000000, 47.000000, 1000.00);
    tmpobjid = CreateObject(2770, 2299.745361, -1929.290039, 13.196000, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(3593, 2296.002441, -1941.103515, 12.968000, 0.000000, 0.000000, -49.000000, 1000.00);
    tmpobjid = CreateObject(16077, 2301.866699, -1922.474365, 10.500000, 0.000000, 0.000000, 26.000000, 1000.00);
    tmpobjid = CreateObject(16077, 2277.636718, -1930.066284, 10.500000, 0.000000, 0.000000, 26.000000, 1000.00);
    tmpobjid = CreateObject(1327, 2292.963134, -1919.220458, 12.513999, 0.000000, 90.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(1327, 2292.783935, -1920.085205, 13.024000, 0.000000, 33.000000, 90.000000, 1000.00);
    tmpobjid = CreateObject(1412, 2294.359863, -1916.090087, 13.769000, 0.000000, 0.000000, 90.000000, 1000.00);
    tmpobjid = CreateObject(1412, 2294.366943, -1921.287231, 13.769000, 0.000000, 0.000000, 90.000000, 1000.00);
    tmpobjid = CreateObject(1415, 2294.968750, -1919.699707, 12.549799, 0.000000, 0.000000, 90.000000, 1000.00);
    tmpobjid = CreateObject(1280, 2336.962402, -1905.135864, 12.996000, 0.000000, 0.000000, 180.000000, 1000.00);
    tmpobjid = CreateObject(1728, 2338.470703, -1910.533935, 12.594499, 0.000000, 0.000000, -222.000000, 1000.00);
    tmpobjid = CreateObject(1498, 2335.470214, -1896.959960, 12.571999, 7.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(1487, 2341.600830, -1904.954101, 13.500000, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(1487, 2340.728027, -1905.054809, 13.500000, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(2671, 2337.687255, -1893.616699, 12.617899, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(2671, 2343.995849, -1883.804687, 12.617899, 0.000000, 0.000000, -76.000000, 1000.00);
    tmpobjid = CreateObject(2671, 2344.531494, -1908.031372, 12.617899, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(2675, 2338.895751, -1908.690185, 12.673899, 0.000000, 0.000000, -91.000000, 1000.00);
    tmpobjid = CreateObject(1487, 2339.148437, -1910.114624, 12.801799, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(1487, 2339.265136, -1910.296264, 12.801799, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(1487, 2337.384765, -1908.300781, 12.641799, 89.984001, 0.000000, 25.000000, 1000.00);
    tmpobjid = CreateObject(1440, 2339.893310, -1890.935180, 13.000000, 0.000000, 0.000000, 90.000000, 1000.00);
    tmpobjid = CreateObject(1462, 2339.563232, -1888.668090, 12.595800, 0.000000, 0.000000, 90.000000, 1000.00);
    tmpobjid = CreateObject(18661, 2331.247558, -1897.299926, 14.399999, 0.000000, 0.000000, -90.000000, 1000.00);
    tmpobjid = CreateObject(2672, 2328.662353, -1893.859497, 12.890000, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(2672, 2327.906005, -1908.662109, 12.890000, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(3496, 2323.838623, -1900.549316, 12.564599, 0.000000, 0.000000, -90.000000, 1000.00);
    tmpobjid = CreateObject(1768, 2329.545654, -1909.029296, 12.607500, 0.000000, 0.000000, -127.000000, 1000.00);
    tmpobjid = CreateObject(1432, 2324.780517, -1905.354125, 12.685999, 0.000000, 0.000000, 33.000000, 1000.00);
    tmpobjid = CreateObject(1757, 2325.683837, -1892.322998, 12.593500, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(1412, 2340.458007, -1885.456665, 13.769000, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(1280, 2347.544677, -1891.801269, 12.942000, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(1728, 2347.507568, -1905.490356, 12.546299, 0.000000, 0.000000, -113.000000, 1000.00);
    tmpobjid = CreateObject(1711, 2335.300537, -1891.871582, 13.071999, -90.000000, 0.000000, -164.000000, 1000.00);
    tmpobjid = CreateObject(19377, 2338.251708, -1895.475097, 12.522000, 0.000000, 90.000000, 90.000000, 1000.00);
    tmpobjid = CreateObject(19377, 2338.264404, -1885.018554, 12.494000, 0.000000, -90.000000, 90.000000, 1000.00);
    tmpobjid = CreateObject(19377, 2328.651123, -1885.011962, 12.494000, 0.000000, 90.000000, 90.000000, 1000.00);
    tmpobjid = CreateObject(19377, 2328.651123, -1895.475097, 12.522000, 0.000000, 90.000000, 90.000000, 1000.00);
    tmpobjid = CreateObject(19377, 2329.102783, -1905.924682, 12.520000, 0.000000, 90.000000, 90.000000, 1000.00);
    tmpobjid = CreateObject(19377, 2338.271240, -1905.950683, 12.520000, 0.000000, 90.000000, 90.000000, 1000.00);
    tmpobjid = CreateObject(1432, 2300.379150, -1912.096191, 12.699999, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(1412, 2326.017578, -1915.633544, 13.769000, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(1412, 2340.493652, -1915.580078, 13.769000, 0.000000, 0.000000, 0.000000, 1000.00);
    tmpobjid = CreateObject(1412, 2343.046386, -1918.254272, 13.769000, 0.000000, 0.000000, 90.000000, 1000.00);
    tmpobjid = CreateObject(1440, 2342.177978, -1919.536499, 12.944000, 0.000000, 0.000000, -91.000000, 1000.00);
    tmpobjid = CreateObject(2676, 2344.601562, -1919.045532, 12.692000, 0.000000, 0.000000, 120.000000, 1000.00);
	CreateObject(18667, 2577.00488, -1723.72498, 3.662, 0, 16, 0); // ?????? 20
    AddStaticVehicleEx(462,1098.4644,-1754.9353,12.9526,90.0686,0,0,120); //
	AddStaticVehicleEx(462,1097.7712,-1758.0487,12.9540,88.1557,0,0,120); // 2
	AddStaticVehicleEx(462,1099.6251,-1760.8726,12.9486,91.1753,0,0,120); // 3
	AddStaticVehicleEx(462,1099.1400,-1763.7225,12.9511,90.0348,0,0,120); // 4
	AddStaticVehicleEx(462,1098.4611,-1766.7186,12.9465,89.3453,0,0,120); // 5
	AddStaticVehicleEx(462,1098.5229,-1769.4489,12.9488,91.0333,0,0,120); // 6
	AddStaticVehicleEx(462,1098.4841,-1772.3336,12.9453,90.9205,0,0,120); // 7
	AddStaticVehicleEx(462,1098.9139,-1775.2433,12.9444,93.3490,0,0,120); // 8
	AddStaticVehicleEx(462,1082.9604,-1775.5685,12.9446,91.7402,0,0,120); // 9
	AddStaticVehicleEx(462,1063.3192,-1775.5881,12.9419,88.4669,0,0,120); // 10
	AddStaticVehicleEx(462,1062.9479,-1772.7039,12.9523,88.1521,0,0,120); // 11
	AddStaticVehicleEx(462,1062.5913,-1769.8309,12.9639,91.5137,0,0,120); // 12
	AddStaticVehicleEx(462,1062.5464,-1766.8663,12.9725,84.9339,0,0,120); // 13
	AddStaticVehicleEx(462,1062.7474,-1763.9166,12.9854,90.1994,0,0,120); // 14
	AddStaticVehicleEx(462,1062.3530,-1760.8860,13.0018,88.9832,0,0,120); // 15
	AddStaticVehicleEx(462,1061.9902,-1758.0127,13.0165,88.7926,0,0,120); // 16
	AddStaticVehicleEx(462,1062.2909,-1755.4524,13.0286,91.8657,0,0,120); // 17
	AddStaticVehicleEx(462,1062.7562,-1752.4817,13.0387,86.3970,0,0,120); // 18
	AddStaticVehicleEx(462,1062.7021,-1749.4781,13.0450,86.9949,0,0,120); // 19
	AddStaticVehicleEx(462,1062.9408,-1746.4783,13.0503,87.1863,0,0,120); // 20
	AddStaticVehicleEx(462,1062.9165,-1743.5659,13.0600,85.9665,0,0,120); // 21
	AddStaticVehicleEx(462,1062.6399,-1740.5865,13.0674,84.3242,0,0,120); // 22
	AddStaticVehicleEx(462,1062.5480,-1737.6345,13.0763,87.5124,0,0,120); // 23
	CreateVehicle(509, 2573.24707, -1721.349, 1.24, 86, -1, -1, 100); // ????????? 0
	CreateVehicle(509, 2573.24707, -1720.198, 1.24, 85.995, -1, -1, 100); // ????????? 1
	CreateVehicle(509, 2573.24707, -1718.99597, 1.24, 85.995, -1, -1, 100); // ????????? 2
	CreateVehicle(509, 2573.24707, -1717.76904, 1.24, 85.995, -1, -1, 100); // ????????? 3
	CreateVehicle(509, 2573.24707, -1716.51697, 1.24, 85.995, -1, -1, 100); // ????????? 4
	CreateVehicle(509, 2573.24707, -1715.54102, 1.24, 85.995, -1, -1, 100); // ????????? 5

	//AddPlayerClass(0, 1958.3783, 1343.1572, 15.3746, 269.1425, 0, 0, 0, 0, 0, 0);
	return 1;
}

public OnGameModeExit()
{
	mysql_close(dbHandle);
	return 1;
}


public OnPlayerRequestClass(playerid, classid)
{
	return 1;
}

public OnPlayerConnect(playerid)
{
	mysql_format(dbHandle,query, sizeof(query),"SELECT * FROM `banlist` WHERE `name` = '%e'",player_info[playerid][name]);
	mysql_tquery(dbHandle, query, "CheckAccountInBan", "i", playerid);
    SetPlayerPos(playerid, 2534.7480,2427.5808,54.9348);
	InterpolateCameraPos(playerid, 2552.605224, 2426.749267, 22.178434, 2552.605224, 2426.749267, 22.178434, 1000);
	InterpolateCameraLookAt(playerid, 2555.998535, 2423.079589, 22.311231, 2555.998535, 2423.079589, 22.311231, 1000);
	RemoveBuildingForPlayer(playerid, 6209, 1024.4453, -1874.7344, 16.1563, 0.25);
	RemoveBuildingForPlayer(playerid, 1231, 1013.1719, -1933.0859, 13.9453, 0.25);
	RemoveBuildingForPlayer(playerid, 1231, 1012.1250, -1911.7031, 14.5703, 0.25);
	RemoveBuildingForPlayer(playerid, 792, 1012.2813, -1916.4531, 11.7266, 0.25);
	RemoveBuildingForPlayer(playerid, 1280, 1011.3594, -1907.7656, 11.7891, 0.25);
	RemoveBuildingForPlayer(playerid, 1280, 1010.9297, -1895.3672, 11.7891, 0.25);
	RemoveBuildingForPlayer(playerid, 1280, 1011.1875, -1901.7344, 11.7891, 0.25);
	RemoveBuildingForPlayer(playerid, 1231, 1011.0703, -1890.3203, 14.0938, 0.25);
	RemoveBuildingForPlayer(playerid, 792, 1011.1016, -1880.8594, 11.7969, 0.25);
	RemoveBuildingForPlayer(playerid, 1280, 1010.5703, -1884.9141, 11.7891, 0.25);
	RemoveBuildingForPlayer(playerid, 620, 1035.4922, -1926.8750, 11.8125, 0.25);
	RemoveBuildingForPlayer(playerid, 6050, 1019.7656, -1921.6250, 13.5938, 0.25);
	RemoveBuildingForPlayer(playerid, 620, 1035.3828, -1902.0156, 11.7813, 0.25);
	RemoveBuildingForPlayer(playerid, 620, 1035.3438, -1879.2969, 12.1250, 0.25);
	RemoveBuildingForPlayer(playerid, 1231, 1008.8203, -1867.7031, 14.5703, 0.25);
	RemoveBuildingForPlayer(playerid, 1281, 1008.6953, -1861.9688, 12.6172, 0.25);
	RemoveBuildingForPlayer(playerid, 792, 1009.4063, -1859.7188, 12.0313, 0.25);
	RemoveBuildingForPlayer(playerid, 620, 1035.6875, -1859.2344, 12.5156, 0.25);
	RemoveBuildingForPlayer(playerid, 712, 1007.6094, -1838.1953, 21.5859, 0.25);
	RemoveBuildingForPlayer(playerid, 620, 1033.4219, -1838.4844, 12.5156, 0.25);
	RemoveBuildingForPlayer(playerid, 620, 1012.7344, -1820.8984, 12.5156, 0.25);
	RemoveBuildingForPlayer(playerid, 1297, 1009.0391, -1813.3125, 16.4453, 0.25);
	RemoveBuildingForPlayer(playerid, 5024, 1748.8438, -1883.0313, 14.1875, 0.25);
	RemoveBuildingForPlayer(playerid, 3654, 2412.5859, -1640.2031, 14.8516, 0.25);
	RemoveBuildingForPlayer(playerid, 17876, 2393.0625, -1677.5234, 20.8203, 0.25);
	RemoveBuildingForPlayer(playerid, 1468, 2408.9531, -1648.8438, 13.8125, 0.25);
	RemoveBuildingForPlayer(playerid, 1468, 2419.4844, -1648.8438, 13.8125, 0.25);
	RemoveBuildingForPlayer(playerid, 1468, 2406.2500, -1646.3047, 13.8125, 0.25);
	RemoveBuildingForPlayer(playerid, 3649, 2412.5859, -1640.2031, 14.8516, 0.25);
	RemoveBuildingForPlayer(playerid, 669, 2403.8516, -1632.8594, 12.7188, 0.25);
	RemoveBuildingForPlayer(playerid, 1468, 2422.0703, -1646.3047, 13.8125, 0.25);
	RemoveBuildingForPlayer(playerid, 1468, 2422.0703, -1641.0313, 13.8125, 0.25);
	RemoveBuildingForPlayer(playerid, 1468, 2422.0703, -1635.7578, 13.8125, 0.25);
	SetPVarInt(playerid, "PlayerInAFK", -2);
	GetPlayerName(playerid, player_info[playerid][name], MAX_PLAYER_NAME);
	SetTimerEx("GetAccountFromMysql", 1000, false, "i", playerid);
	temp_info[playerid][report] = false;
	reporttime[playerid] = 0;
	rpID[playerid] = 0;
	return 1;
}

public OnPlayerDisconnect(playerid, reason)
{
	new Float: hps;
	GetPlayerHealth(playerid, hps);
	player_info[playerid][hp] = floatround(hps);
	temp_info[playerid][aLogin] = false;
	Iter_Remove(Admins, playerid);
    SaveAccount(playerid);
	return 1;
}


forward MuniteUpdate();
public MuniteUpdate()
{
	foreach(new i:Player)
	{
	    player_info[i][mins]++;
	    if(player_info[i][mins]>29)
	    {
	        player_info[i][mins]=0;
	        query[0]=EOS;
	        PayDay(i);
	        mysql_format(dbHandle,query,sizeof(query),"UPDATE `accounts` SET `mins` = '%d' WHERE `id` = '%d'",player_info[i][mins],player_info[i][id]);
	        mysql_query(dbHandle,query);
		}
		if(player_info[i][muted]!=0)
		{
		    player_info[i][muted]-=60000;
			query[0]=EOS;
			mysql_format(dbHandle,query,sizeof(query),"UPDATE `accounts` SET `muted` = '%d' WHERE `id` = '%d'",player_info[i][muted],player_info[i][id]);
  			mysql_query(dbHandle,query);
		}
		if(player_info[i][jailed]!=0)
		{
	    player_info[i][jailed]--;
	    query[0]=EOS;
        mysql_format(dbHandle,query,sizeof(query),"UPDATE `accounts` SET `jailed` = '%d' WHERE `id` = '%d'",player_info[i][jailed],player_info[i][id]);
        mysql_query(dbHandle,query);
        if(player_info[i][jailed]==0)
        {
            SPD(i,DLG_STYLE_MUTED,DIALOG_STYLE_MSGBOX,"{FFFFFF}Наказание","{FFFFFF}Вы успешно вышли из тюрьмы\nВпредь, не нарушайте правила!","Закрыть","");
            ResetPlayerWeapons(i);
		    query[0]=EOS;
		    mysql_format(dbHandle,query,sizeof(query),"UPDATE `accounts` SET `jailed` = '%d' WHERE `id` = '%d'",0,player_info[i][id]);
		    mysql_query(dbHandle,query);
		    player_info[i][jailed]=0;
            return OnPlayerSpawn(i);
		}
	}
 }
	return 1;
}

stock PayDay(playerid)
{
	SCM(playerid,COLOR_WHITE,"\t\t--PayDay--");
	SCM(playerid,COLOR_WHITE,"\t\tВыдано {FF0000}1 {FFFFFF}EXP");
	GiveExp(playerid,1);
}

new expmult=4;

stock GiveExp(playerid,EXP)
{
	player_info[playerid][exp]+=EXP;
	new needexp=(player_info[playerid][level]+1)*expmult;
	new buffer=player_info[playerid][exp]-needexp;
	if(player_info[playerid][exp]>=needexp)
	{
	    player_info[playerid][exp]=0;
	    if(buffer>0) player_info[playerid][exp]+=buffer;
	    player_info[playerid][level]++;
	    new str[90];
	    format(str,sizeof(str),"{00BFFF}[Информация] {FFFFFF}Вы достигли %d уровня", player_info[playerid][level]);
	    SCM(playerid,COLOR_WHITE,str);
	    new hz[90];
	    format(hz,sizeof(hz),"Игрок %s достиг %d уровня",player_info[playerid][name],player_info[playerid][level]);
	    SAM(COLOR_GREY,hz);
	    SetPlayerScore(playerid,player_info[playerid][level]);
	}
	query[0]=EOS;
	mysql_format(dbHandle,query,sizeof(query),"UPDATE `accounts` SET `level` = '%d', `exp` = '%d' WHERE `id` = '%d'",player_info[playerid][level],player_info[playerid][exp],player_info[playerid][id]);
	mysql_query(dbHandle,query);
}


public OnPlayerSpawn(playerid)
{
	if(player_info[playerid][hp]<1) return SetPlayerHealth(playerid,20);
	else SetPlayerHealth(playerid, player_info[playerid][hp]);
	SetPlayerSkin(playerid, player_info[playerid][skin]);
	SetPlayerScore(playerid, player_info[playerid][level]);
	SetPlayerColor(playerid, 0xFFFFFF33);
	ResetPlayerMoney(playerid);
	GivePlayerMoney(playerid, player_info[playerid][money]);
    SetPVarInt(playerid, "PlayerInAFK", 0);
    SetPVarInt(playerid, "GM", 0);
    SetPVarInt(playerid, "jgm", 0);
    onjobm[playerid]=false;
    iskey[playerid]=false;
    SetPVarInt(playerid,"nondlg",0);
    ResetPlayerWeapons(playerid);
    if(player_info[playerid][jailed]!=0)
    {
        GivePlayerWeapon(playerid,24,200);
		return SetPlayerPos(playerid,-1631.1962,-2238.8057,31.4766);
	}
	switch(random(3))
	{
	    case 0:
		{
			SetPlayerPos(playerid, 1154.0128,-1770.0215,16.5938);
			SetCameraBehindPlayer(playerid);
		}
		case 1:
		{
			SetPlayerPos(playerid, 1156.2521,-1770.2153,16.5938);
			SetCameraBehindPlayer(playerid);
		}
		case 2:
		{
			SetPlayerPos(playerid, 1151.7434,-1770.4619,16.5992);
            SetCameraBehindPlayer(playerid);
		}
	}
	if(player_info[playerid][admin]>0)
	{
		SetPVarInt(playerid,"active",0);
		if(player_info[playerid][apass]==0) return SCM(playerid,COLOR_BLUE,"[Информация] {FFFFFF}У вас не установлен Админ-Пароль. Используйте команду /setapass");
	}
	return 1;
}

public OnPlayerDeath(playerid, killerid, reason)
{
	GameTextForPlayer(killerid,"~r~+Kill",2000,3);
	if(player_info[killerid][jailed]!=0)
	{
	 	player_info[killerid][jcoins]++;
	 	GameTextForPlayer(killerid,"~r~Jail~w~-Coin++",2000,3);
	 	query[0]=EOS;
		mysql_format(dbHandle,query,sizeof(query),"UPDATE `accounts` SET `jcoins` = '%d' WHERE `id` = '%d'",player_info[killerid][jcoins],player_info[killerid][id]);
  		mysql_query(dbHandle,query);
	 	
	}
	if(player_info[playerid][admin]==0) return 1;
	else SendDeathMessage(killerid, playerid, reason);
	SetPVarInt(playerid, "PlayerInAFK", -2);
	return 1;
}


public OnVehicleSpawn(vehicleid)
{
	return 1;
}

public OnVehicleDeath(vehicleid, killerid)
{
	return 1;
}

public OnPlayerText(playerid, text[])
{
	if(pLogin[playerid] != true) return 0;
	if(player_info[playerid][muted]!=0)
	{
	    new how[144];
		new mn = player_info[playerid][muted]/60000;
	    format(how,sizeof(how),"У вас блокировка чата на {FF0000}%d {FFFFFF}минут",mn);
	    SCM(playerid,COLOR_WHITE,how);
	    SetPlayerChatBubble(playerid, "Пытается что-то сказать...", 0xFF0000FF, 50.0, 7000);
	    return 0;
	    
	}
    ApplyAnimation(playerid,"PED","IDLE_chat",4.1,0,1,1,1,1);
    if(player_info[playerid][admin]==0)
    {
		SetPlayerColor(playerid,0xFFFFFFFF);
	}
	else
	{
		SetPlayerColor(playerid,0xFF0000FF);
	}
	SetTimerEx("RukiOff", 1400, 0, "d", playerid);
	return 1;
}


forward RukiOff(playerid);
public RukiOff(playerid)
{
	ApplyAnimation(playerid,"CARRY","crry_prtial",4.0,0,0,0,0,0,0);
	return 1;
}


public OnPlayerCommandText(playerid, cmdtext[])
{
	return 0;
}

public OnPlayerEnterVehicle(playerid, vehicleid, ispassenger)
{
	return 1;
}



public OnPlayerExitVehicle(playerid, vehicleid)
{
	return 1;
}

public OnPlayerGiveDamage(playerid, damagedid, Float: amount, weaponid, bodypart)
{
	if(GetPVarInt(damagedid,"GM")==1)
	{
		GameTextForPlayer(playerid,"~w~This Admin Has~r~GodMod",3000,3);
	    return 0;
	}
	if(GetPVarInt(damagedid,"jgm")==1)
	{
	    GameTextForPlayer(playerid,"~w~This Prisoner Has~r~GodMod",3000,3);
	    return 0;
	}
	if(onjobm[damagedid])
	{
	    new dmkick;
	    dmkick++;
	    new kickdmer[200];
	    format(kickdmer,sizeof(kickdmer),"{FFFFFF}Вы не можете наносить урон рабочим!\nВ случае повторного нарушения, {FF0000}Вы будете кикнуты!\n{FFFFFF}Предупреждений {FF0000}%d\3",dmkick);
		if(dmkick<3) SPD(playerid,DLG_WARNING,DIALOG_STYLE_MSGBOX,"{FF0000}Анти-ДМ",kickdmer,"Закрыть","");
		else if(dmkick==3) SPD(playerid,DLG_DMKICK,DIALOG_STYLE_MSGBOX,"{FF0000}Анти-ДМ","{FF0000}3\3\n{FFFFFF}Вы были кикнуты!","Выход","");
		return 0;
	}
    return 1;
}

public OnPlayerStateChange(playerid, newstate, oldstate)
{
	return 1;
}

public OnPlayerEnterCheckpoint(playerid)
{
	return 1;
}

public OnPlayerLeaveCheckpoint(playerid)
{
	return 1;
}

public OnPlayerEnterRaceCheckpoint(playerid)
{
	return 1;
}

public OnPlayerLeaveRaceCheckpoint(playerid)
{
	return 1;
}

public OnRconCommand(cmd[])
{
	return 1;
}

public OnPlayerRequestSpawn(playerid)
{
	return 1;
}

public OnObjectMoved(objectid)
{
	return 1;
}

public OnPlayerObjectMoved(playerid, objectid)
{
	return 1;
}

public OnPlayerPickUpPickup(playerid, pickupid)
{
    if(GetPVarInt(playerid,"nondlg")==1) return 0;
	if(pickupid==quest)
	{
		return 1;
	}
	if(pickupid==minejob)
	{
	    if(onjobm[playerid]==false)
		{
	    	SPD(playerid,DLG_ENTERJOBM,DIALOG_STYLE_MSGBOX,"{FFFFFF}Трудоустройство","{FFFFFF}Вы действительно хотите начать смену?","Да","Нет");
	    	SetPVarInt(playerid,"nondlg",1);
	    	SetTimer("dlgon",1500,false);
	    }
	    else
	    {
	        SPD(playerid,DLG_OUTJOBM,DIALOG_STYLE_MSGBOX,"{FFFFFF}Трудоустройство","{FFFFFF}Вы действительно хотите завершить смену?","Да","Нет");
	    	SetPVarInt(playerid,"nondlg",1);
	    	SetTimer("dlgon",2000,false);
		}
	}
	return 1;
}

forward dlgon(playerid);
public dlgon(playerid)
{
	return SetPVarInt(playerid,"nondlg",0);
}

public OnVehicleMod(playerid, vehicleid, componentid)
{
	return 1;
}

public OnVehiclePaintjob(playerid, vehicleid, paintjobid)
{
	return 1;
}

public OnVehicleRespray(playerid, vehicleid, color1, color2)
{
	return 1;
}

public OnPlayerSelectedMenuRow(playerid, row)
{
	return 1;
}

public OnPlayerExitedMenu(playerid)
{
	return 1;
}


public OnPlayerInteriorChange(playerid, newinteriorid, oldinteriorid)
{
	return 1;
}

stock randomEx(min,max)
{
    new rand = random(max-min)+min;
    return rand;
}

public OnPlayerKeyStateChange(playerid, newkeys, oldkeys)
{
	return 1;
}

public OnRconLoginAttempt(ip[], password[], success)
{
	return 1;
}

public OnPlayerUpdate(playerid)
{
		if(GetPlayerMoney(playerid) > 50000000)
	    {
	        if(player_info[playerid][box]==1)
	        {
   	 			SetPlayerAttachedObject(playerid,3,1210,5,0.299999,0.099999,0.000000,0.000000,-83.000000,0.000000,1.000000,1.000000,1.000000);
			}
			else RemovePlayerAttachedObject(playerid,3);
	    }
		if(GetPVarInt(playerid, "PlayerInAFK") > -2)
    	{
        	if(GetPVarInt(playerid, "PlayerInAFK") > 2) SetPlayerChatBubble(playerid, "{FFFF00}АФК: {FFFFFF}завершено", COLOR_WHITE, 20.0, 500);
       		SetPVarInt(playerid, "PlayerInAFK", 0);
    	}
    	return 1;
}

public OnPlayerClickMap(playerid, Float:fX, Float:fY, Float:fZ)
{
	if(player_info[playerid][admin] == 0) return 1;
	SetPlayerPos(playerid, fX, fY, fZ);
	return 1;
}

public OnPlayerStreamIn(playerid, forplayerid)
{
	return 1;
}

public OnPlayerEnterDynamicCP(playerid, checkpointid)
{
	if(checkpointid==cmine[playerid])
	{
		ApplyAnimation(playerid,"SWORD","SWORD_4",4.0,0,1,1,0,0,1);
		DestroyDynamicCP(checkpointid);
		SetTimer("minetwo",3500,false);
	}
	if(checkpointid==mineout[playerid])
	{
	    if(gruz[playerid]==true)
	    {
			new zp[100];
			new rando = randomEx(1,9);
			format(zp,sizeof(zp),"[Информация] {FFFFFF}Вы добыли {FFFF00}%d{FFFFFF} килограммов руды и получили {00FF00}$%d",rando,rando*100);
			GivePlayerMoney(playerid,rando*100);
			SCM(playerid,COLOR_BLUE,zp);
			player_info[playerid][money]=player_info[playerid][money]+rando*100;
			RemovePlayerAttachedObject(playerid,0);
			SetPlayerSpecialAction(playerid,0);
			DestroyDynamicCP(checkpointid);
			gruz[playerid]=false;
			SetPVarInt(playerid,"nonspam",0);
			switch(random(6))
			{
			    case 0: cmine[playerid] = CreateDynamicCP(-1858.7250,-1650.7412,21.9809, 2,  -1, -1, -1, 150.0);
			    case 1: cmine[playerid] = CreateDynamicCP(-1858.2006,-1641.1433,23.5228, 2,  -1, -1, -1, 150.0);
			    case 2: cmine[playerid] = CreateDynamicCP(-1863.5795,-1646.4695,24.1585, 2,  -1, -1, -1, 150.0);
			    case 3: cmine[playerid] = CreateDynamicCP(-1865.9402,-1652.0808,24.0815, 2,  -1, -1, -1, 150.0);
			    case 4: cmine[playerid] = CreateDynamicCP(-1862.8358,-1655.6722,24.1135, 2,  -1, -1, -1, 150.0);
			    case 5: cmine[playerid] = CreateDynamicCP(-1856.5836,-1654.8093,25.1201, 2,  -1, -1, -1, 150.0);
			}
		}
		else
		{
		    DestroyDynamicCP(checkpointid);
		}
	}
	return 1;
}

forward minetwo(playerid);
public minetwo(playerid)
{
	ClearAnimations(playerid);
	gruz[playerid]=true;
	SetPlayerSpecialAction(playerid,25);
	SetPlayerAttachedObject(playerid, 0, 19639, 3, 0.3339, -0.4530, -0.0960, -1.2999, -88.9998, 96.0001, 0.8349, 0.7100, 0.8479, 0, 0); // "wen" by Caterpillar (Skin:6)
	SetPlayerAttachedObject(playerid, 1, 3929, 3, 0.1689, -0.3639, 0.0889, -57.8999, 0.0000, -71.1999, 0.2750, 0.2840, 0.2699, 0, 0); // "wen" by Caterpillar (Skin:6)
	SetPlayerAttachedObject(playerid, 2, 1303, 4, 0.1919, -0.4339, 0.0010, 0.0000, 0.0000, 68.2999, 0.1969, 0.1519, 0.2450, 0, 0); // "wen" by Caterpillar (Skin:6)
	SCM(playerid,COLOR_BLUE,"[Информация] {FFFFFF}Отнесите руду на склад");
	mineout[playerid]=CreateDynamicCP(-1906.2277,-1648.9509,21.7500, 2,  -1, -1, -1, 150.0);
}

public OnPlayerStreamOut(playerid, forplayerid)
{
	return 1;
}

public OnVehicleStreamIn(vehicleid, forplayerid)
{
	return 1;
}

public OnVehicleStreamOut(vehicleid, forplayerid)
{
	return 1;
}


forward kick(playerid);
public kick(playerid)
{
	return Kick(playerid);
}


new asshole;


new textchela[128];
new pmid;
CMD:pm(playerid,params[])
{
	if(player_info[playerid][admin]==0) return 1;
	if(!pLogin[playerid]) return 1;
	if(temp_info[playerid][aLogin] == false) return SCM(playerid, COLOR_RED, "[Ошибка!] {FFFFFF}Вы не авторизовались как администратор.");
	if(sscanf(params,"dd",params[0],params[1])) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Используйте /pm [id] [0|1]");
	if(params[0]==INVALID_PLAYER_ID) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Неверный id игрока!");
	if(!IsPlayerConnected(params[0])) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Игрок не найден!");
	pmid=params[0];
	switch(params[1])
	{
	    case 0:
	    {
	        SPD(playerid,DLG_PMM,DIALOG_STYLE_INPUT,"{FFFFFF}Отправить сообщение","{FFFFFF}Введите текст сообщения:","Далее","Выход");
		}
	    case 1:
	    {
			SPD(playerid,DLG_PMD,DIALOG_STYLE_INPUT,"{FFFFFF}Отправить сообщение","{FFFFFF}Введите текст сообщения:","Далее","Выход");
		}
	    default: return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}3 параметр может быть 0 или 1!");
	}
	return 1;
}


public OnDialogResponse(playerid, dialogid, response, listitem, inputtext[])
{
	new str[256];
	switch(dialogid)
	{
	    case DLG_REG:
	    {
	        if(!response) return Kick(playerid);
	        if(!(strlen(inputtext) >= 8 && strlen(inputtext) <= 22))
	        {
	            SCM(playerid, COLOR_LIGHTRED, "Длина пароля должна быть не менее 8 и не более 22 символов.");
	            format(str, sizeof(str), "{FFFFFF}Добро пожаловать на наш сервер, ваш ник: {00FFFF}%s[%i]\n{FFFFFF}Данный аккаунт зарегистрирован\nДля продолжения введите пароль:\n\n", player_info[playerid][name], playerid);
	            return SPD(playerid, DLG_REG, DIALOG_STYLE_INPUT, "{ff9300}Регистрация | {DCDCDC}Авторизация", str, "Далее", "Отмена");
	        }
   			for(new i = 0; i < strlen(inputtext); i++)
			{
			    switch(inputtext[i])
			    {
			        case 'a'..'z', 'A'..'Z', '0'..'9': continue;
					default:
					{
					    SCM(playerid, 0xFF0000AA, "[Ошибка!]:{FFFFFF} Пароль может состоять только из латинских символов и цифр.");
					    format(str, sizeof(str), "{FFFFFF}Добро пожаловать на наш сервер, ваш ник: {00FFFF}%s[%i]\nДанный аккаунт не зарегистрирован\nДля регистрации введите пароль:\n\n", player_info[playerid][name], playerid); 
                        return SPD(playerid, DLG_REG, DIALOG_STYLE_INPUT, "{ff9300}Регистрация | {DCDCDC}Авторизация", str, "Далее", "Отмена"); //{ff9300}Регистрация | {DCDCDC}Авторизация  {ff9300}Регистрация
					}

			    }
			}
			player_info[playerid][pass] = EOS;
			strins(player_info[playerid][pass], inputtext, 0);
			SPD(playerid, DLG_REG_GENDER, DIALOG_STYLE_MSGBOX, "{ff9300}Регистрация | {DCDCDC}Авторизация", "{FFFFFF}Выберите пол вашего персонажа:", "Мужской", "Женский");
	    }
	    case DLG_REG_GENDER:
	    {
	        if(!response) player_info[playerid][gender] = 2;
			if(response) player_info[playerid][gender] = 1;
   			SPD(playerid, DLG_REG_AGE, DIALOG_STYLE_INPUT, "{ff9300}Регистрация | {DCDCDC}Авторизация", "{FFFFFF}Введите возраст вашего персонажа (от {FFFF00}21{FFFFFF} до {FFFF00}99{FFFFFF}):", "Далее", "Отмена");
	    }
	    case DLG_REG_AGE:
	    {
     		if(!response) return Kick(playerid);
     		for(new i = 0; i < strlen(inputtext); i++)
			{
			    switch(inputtext[i])
			    {
			        case '0'..'9': continue;
					default:
					{
	    				SCM(playerid, COLOR_LIGHTRED, "Возраст персонажа необходимо вводить цифрами.");
					   	return SPD(playerid, DLG_REG_AGE, DIALOG_STYLE_INPUT, "{ff9300}Регистрация |{DCDCDC} Авторизация", "{FFFFFF}Введите возраст вашего персонажа (от 21 до 99):", "Далее", "Отмена");
					}

			    }
			}
			if(!(strval(inputtext) >= 21 && strval(inputtext) <= 99))
			{
			    SCM(playerid, COLOR_LIGHTRED, "Возраст персонажа должен быть не меньше 21 и не больше 99 лет.");
			    return SPD(playerid, DLG_REG_AGE, DIALOG_STYLE_INPUT, "{ff9300}Регистрация |{DCDCDC} Авторизация", "{FFFFFF}Введите возраст вашего персонажа (от 21 до 99):", "Далее", "Отмена");
			}
			player_info[playerid][age] = strval(inputtext);
			switch(player_info[playerid][age])
			{
			    case 21..49:
			    {
			        if(player_info[playerid][gender] == 1)
			        {
			            switch(random(4)) //1 player_info[playerid][skin]
			            {
			                case 0: player_info[playerid][skin]=78;
			                case 1: player_info[playerid][skin]=79;
			                case 2: player_info[playerid][skin]=135;
			                case 3: player_info[playerid][skin]=137;
						}
			        }
			        if(player_info[playerid][gender] == 2)
			        {
			           switch(random(2)) //2
			           {
			                case 0: player_info[playerid][skin]=151;
			                case 1: player_info[playerid][skin]=157;
					   }
			        }
			    }
			    case 50..99:
			    {
			        if(player_info[playerid][gender] == 1)
			        {
			            switch(random(2))
			            {
			                case 0: player_info[playerid][skin]=14;
			                case 1: player_info[playerid][skin]=15;
			                case 2: player_info[playerid][skin]=159;
						}
			        }
			        if(player_info[playerid][gender] == 2)
			        {
			            switch(random(2))
			            {
			                case 0:  player_info[playerid][skin]=197;
			                case 1:  player_info[playerid][skin]=199;
						}
			        }
			    }
			}
			player_info[playerid][regip][0] = EOS;
			GetPlayerIp(playerid, player_info[playerid][regip], 15);
			player_info[playerid][regdate][0] = EOS;
			new yx, mx, dx, tempdate[11];
			getdate(yx, mx, dx);
			format(tempdate, sizeof(tempdate), "%d.%d.%d", dx, mx, yx);
			strins(player_info[playerid][regdate], tempdate, 0);
			query[0] = EOS;
			mysql_format(dbHandle, query, sizeof(query), "INSERT INTO `accounts` (`name`, `password`, `gender`, `age`, `skin`, `regip`, `regdate`) VALUES ('%e', '%e', '%d', '%d', '%d', '%e', '%e')", player_info[playerid][name], player_info[playerid][pass], player_info[playerid][gender], player_info[playerid][age], player_info[playerid][skin], player_info[playerid][regip], player_info[playerid][regdate]);
			mysql_tquery(dbHandle, query);
			query[0] = EOS;
			mysql_format(dbHandle, query, sizeof(query), "SELECT * FROM `accounts` WHERE `name` = '%e'", player_info[playerid][name]);
			mysql_tquery(dbHandle, query, "CheckAccountFromMysql", "i", playerid);
			
		}
		case DLG_LOGIN:
		{
		    if(!response) return Kick(playerid);
		    query[0] = EOS;
			mysql_format(dbHandle, query, sizeof(query), "SELECT * FROM `accounts` WHERE `name` = '%e' AND `password` = '%e'", player_info[playerid][name], inputtext);
			mysql_tquery(dbHandle, query, "UploadPlayerAccount", "i", playerid);
		}
		case DLG_CMD_MN:
		{
		    if(response)
		    {
		        switch(listitem)
		        {
		            case 0:
		            {
		                ShowStats(playerid);
		            }
		            case 1:
		            {
		                new tempstring[256];
		                format(tempstring, sizeof(tempstring), "{ffffff}1. Основные команды\nЧат");
						SPD(playerid, DLG_MENU_CMD, DIALOG_STYLE_LIST, "{ff9300}Команды сервера", tempstring, "Выбрать", "Назад");
		            }
		            case 2:
		            {
		                ReportCMD(playerid);
		            }
		            case 3:
		            {
		                ShowConfig(playerid);
		            }
		        }
		    }
		}
  		case DLG_MENU_STAT:
		{
            if(response) return SPD(playerid, DLG_CMD_MN, DIALOG_STYLE_LIST, "{ff9300}Меню игрока", "{ffffff}1. Статистика персонажа\n2. Команды сервера\n3. Связь с администрацией", "Выбрать", "Выйти");
		}
		case DLG_MENU_CMD:
		{
            if(!response) return SPD(playerid, DLG_CMD_MN, DIALOG_STYLE_LIST, "{ff9300}Меню игрока", "{ffffff}1. Статистика персонажа\n2. Команды сервера\n3. Связь с администрацией", "Выбрать", "Выйти");
			switch(listitem)
			{
			    case 0: SPD(playerid, DLG_MENU_CMD_SHOW, DIALOG_STYLE_MSGBOX, "{ff9300}Основные команды", "{FFFF00}/mn{FFFFFF} - Меню игрока\n{FFFF00}/stats{FFFFFF} - статистика персонажа\n{FFFF00}/report{FFFFFF} - Связь с администрацией ", "Назад", "Закрыть");
			    case 1: SPD(playerid,DLG_MENU_CMD_CHAT,DIALOG_STYLE_MSGBOX, "{ff9300}Чат","{FF0000}/me - {FFFFFF}действие персонажа в данный момент\n{FF0000}/do - {FFFFFF}совершенное действие\n{FF0000}\try - {FFFFFF}действие, которое может закончиться удачно или нет\n{FF0000}\todo - {FFFFFF}действие + текст.","Назад","");
			}
		}
		case DLG_MENU_CMD_CHAT: if(response) return SPD(playerid, DLG_MENU_CMD, DIALOG_STYLE_LIST, "{ff9300}Команды сервера", "{ffffff}1. Основные команды\n2. Чат", "Выбрать", "Назад");
		case DLG_MENU_CMD_SHOW:
		{
            if(response)
            {
				SPD(playerid, DLG_MENU_CMD, DIALOG_STYLE_LIST, "{ff9300}Команды сервера", "{ffffff}1. Основные команды\n2. Чат", "Выбрать", "Назад");
            }
		}
		case DLG_MENU_CONFIG:
		{
			new tempstr[63+45];
		    if(response)
            {
                switch(listitem)
                {
                    case 0:
                    {
						if(player_info[playerid][isemail] == 0)
						{
						    SPD(playerid, DLG_CREATE_EMAIL, DIALOG_STYLE_INPUT, "{ff9300}Ввод EMail", "{ffffff}У вас отсутствует EMail, вам необходимо ввести его.\nВ случае взлома или потери пароля, вы сможете восстановить его,\nполучив ссылку с восстановлением на ваш почтовый ящик.\nВведите ваш EMail в поле ниже:\n", "Готово", "Отмена");
						}
						else if(player_info[playerid][isemail] == 1)
						{
						    format(tempstr, sizeof(tempstr), "{ffffff}К вашему аккаунту уже привязан EMail.\nПривязанный адрес: %s. Вы хотите изменить его?", player_info[playerid][email]);
							SPD(playerid, DLG_CHANGE_EMAIL, DIALOG_STYLE_MSGBOX, "{ff9300}Изменение EMail", tempstr, "Да", "Нет");
						}
                    }
                    case 1:
                    {
                        if(player_info[playerid][box]==0)
                        {
                            query[0]=EOS;
							mysql_format(dbHandle,query,sizeof(query),"UPDATE `accounts` SET `box` = '%d' WHERE `id` = '%d'",1,player_info[playerid][id]);
							mysql_query(dbHandle,query);
                            player_info[playerid][box]=1;
                            if(GetPlayerMoney(playerid) > 50000000)	SetPlayerAttachedObject(playerid,3,1210,5,0.299999,0.099999,0.000000,0.000000,-83.000000,0.000000,1.000000,1.000000,1.000000);
						}
						else
						{
						    query[0]=EOS;
					        mysql_format(dbHandle,query,sizeof(query),"UPDATE `accounts` SET `box` = '%d' WHERE `id` = '%d'",0,player_info[playerid][id]);
					        mysql_query(dbHandle,query);
						    player_info[playerid][box]=0;
						    RemovePlayerAttachedObject(playerid,3);
						}
					}
                }
            }
		}
		case DLG_CREATE_EMAIL:
		{
		    if(response)
		    {
				if(strlen(inputtext) < 1 || strlen(inputtext) > 60)
				{
				    SPD(playerid, DLG_CREATE_EMAIL, DIALOG_STYLE_INPUT, "{ff9300}Ввод EMail", "{ffffff}У вас отсутствует EMail, вам необходимо ввести его.\nВ случае взлома или потери пароля, вы сможете восстановить его,\nполучив ссылку с восстановлением на ваш почтовый ящик.\nВведите ваш EMail в поле ниже:\n", "Готово", "Отмена");
		            return SCM(playerid, COLOR_RED, "[Ошибка!]: {FFFFFF}Длина EMail должна быть не больше 60 и не меньше 1 символа");
				}
				player_info[playerid][isemail] = 1;
				player_info[playerid][email][0] = EOS;
				strins(player_info[playerid][email], inputtext, 0);
				GameTextForPlayer(playerid,"~g~Successfully",3000,1);
				SCM(playerid, COLOR_RED, "{00FF00}[Подсказка]: {FFFFFF}Вы успешно установили новый Email");
			}
		}
		case DLG_CHANGE_EMAIL:
		{
		    if(response)
		    {
   				SPD(playerid, DLG_CREATE_EMAIL, DIALOG_STYLE_INPUT, "{FF0000}EMail", "{ffffff}Введите новый EMail.\nВ случае взлома или потери пароля, вы сможете восстановить его,\nполучив ссылку с восстановлением на ваш почтовый ящик.\n\nВведите новый EMail в поле ниже:\n", "Готово", "Отмена");
			}
		}
		case DLG_ALOGIN:
		{
		    if(response)
		    {
		        new tempstring[83+MAX_PLAYER_NAME];
		        if(player_info[playerid][apass] == strval(inputtext))
		        {
		            temp_info[playerid][aLogin] = true;
		            format(tempstring, sizeof(tempstring), "{7FFF00}[ALOGIN]:{FFFFFF} Администратор %d-ого уровня %s[%i] успешно авторизовался.", player_info[playerid][admin], player_info[playerid][name], playerid);
		            SendAdminMessage(COLOR_GREY, tempstring);
		            Iter_Add(Admins, playerid);
		        }
		        else if(player_info[playerid][apass] == strval(inputtext))
		        {
		            format(tempstring, sizeof(tempstring), "{7FFF00}[ALOGIN]:{FFFFFF} Администратор %d-ого уровня %s[%i] ввёл неправильный пароль.", player_info[playerid][admin], player_info[playerid][name], playerid);
		            SendAdminMessage(COLOR_GREY, tempstring);
		        }
		    }
		}
		case DLG_APANEL:
		{
		    if(response)
		    {
				switch(listitem)
				{
				    case 0: OnlineAdmins(playerid);
				    case 1:
				    {
						new bool:gm=false;
						gm=!gm;
						if(gm)
						{
						    SetPlayerHealth(playerid,INFINITE);
						    SetPVarInt(playerid,"GM",1);
						}
						else
						{
						    SetPlayerHealth(playerid,player_info[playerid][hp]);
						    SetPVarInt(playerid,"GM",0);
						}
					}
				}
		    }
		}
		case DLG_REPORT:
		{
		    if(response)
		    {
		        new tempstr[128+MAX_PLAYER_NAME];
		        if(strlen(inputtext) >= 80 || strlen(inputtext) <= 0)
		        {
		            SCM(playerid, COLOR_RED, "[Ошибка!]: Длина сообщения должна быть не менее 0 и не более 80 символов.");
		            GameTextForPlayer(playerid,"~r~Failed!",4000,1);
					return ReportCMD(playerid);
		        }
		        SCM(playerid, COLOR_WHITE, "Ваше сообщение отправлено администрации сервера. Ожидайте ответ.");
				GameTextForPlayer(playerid,"~g~Successfully!",4000,1);
		        format(tempstr, sizeof(tempstr), "{FF0000}[REPORT]: {ffffff}%s[%d]: %s", player_info[playerid][name], playerid, inputtext);
		        SendAdminMessage(COLOR_LIGHTRED, tempstr);
                strins(reporttext[playerid], inputtext, 0);
		        temp_info[playerid][report] = true;
		        reporttime[playerid] = gettime();
		        //SetTimerEx("ReportOn", 60000, false, "i", playerid);
		    }
		}
		case DLG_REP_LIST:
		{
		    if(response)
		    {
		        new num;
		        new tempstr[25+MAX_PLAYER_NAME];
		        new tempstr1[256];
		        for(new i; i < MAX_PLAYERS; i++)
		        {
		            if(reporttime[i] > 0)
		            {
		                if(num == listitem)
		                {
							//reporttime[i] = 0;
							format(tempstr, sizeof(tempstr), "{ff9300}Жалоба от {00FFFF}%s[%d]", player_info[i][name], i);
							format(tempstr1, sizeof(tempstr1), "{FFFFFF}%s\n\nВведите ответ:\n", reporttext[i]);
							SPD(playerid, DLG_REP_LIST_TWO, DIALOG_STYLE_INPUT, tempstr, tempstr1, "Готово", "Отклонить");
							rpID[playerid] = i;
							break;
						}
						num++;
		            }
		        }
		    }
		}
		case DLG_REP_LIST_TWO:
		{
		    if(response)
		    {
		        new tempstr[256];
		        new tempid = rpID[playerid];
				if(strlen(inputtext) > 60 || strlen(inputtext) < 2) return SCM(playerid, COLOR_GREY, "Ответ должен состоять от 2 до 60 символов");
				format(tempstr, sizeof(tempstr), "Ответ от администратора %s: %s",player_info[playerid][name], inputtext);
				SCM(tempid, COLOR_WHITE, tempstr);
				format(tempstr, sizeof(tempstr), "Ваше обращение: %s", reporttext[playerid]);
				SCM(tempid, COLOR_WHITE, tempstr);
				SCM(playerid, COLOR_WHITE, "{00FF00}[REPORT]: {FFFFFF}Ответ успешно отправлен.");
				GameTextForPlayer(playerid,"~g~Successfully",5000,1);
				temp_info[tempid][report] = false;
				reporttime[tempid] = 0;
				reporttext[tempid][0] = EOS;
				rpID[playerid] = 0;
		    }
		}
		case DLG_AHELP:
		{
		    if(response)
		    {
				switch(listitem)
				{
				    case 0: ShowFirstLevelCMD(playerid);
				    case 1: ShowSecondLevelCMD(playerid);
				    case 2: ShowThirdLevelCMD(playerid);
				    case 3: ShowFourLevelCMD(playerid);
				    case 4: ShowFiveLevelCMD(playerid);
				    case 5: ShowSixLevelCMD(playerid);
				    case 6: ShowSevenLevelCMD(playerid);
				}
		    }
		}
		case DLG_AHELP_CMD:
		{
		    if(response)
		    {
				SPD(playerid,DLG_CMD1,DIALOG_STYLE_MSGBOX,"{FFFFFF}Команды 1 уровня| 2 Страница","{FFFF00}/sp - {FFFFFF}Заспавнить игрока","Выход","");
		    }
		}
		case DLG_TP:
		{
			if(response)
			{
			    switch(listitem)
			    {
			        case 0: SetPlayerPos(playerid,-2235.4351,-1740.8162,480.8299);
			        case 1: SetPlayerPos(playerid,1154.0413,-1769.9874,16.5938);
			        case 2: SetPlayerPos(playerid,2462.7759,-1659.6254,13.3047);
				}
			}
		}
		case DLG_ANW:
		{
//		    new tempstr[100];
//		    format(tempstr,sizeof(tempstr),"Игрок %s был кикнул за использование {00FFFF}[DGun]",player_info[playerid][name]);
//		    SAM(COLOR_GREY,tempstr);
			return Kick(playerid);
		}
		case DLG_RADIO:
		{
		    switch(listitem)
		    {
  				case 0: SPD(playerid, DLG_ARTISTS,DIALOG_STYLE_LIST,"{FFFFFF}Исполнители","{FFFFFF}Eminem","Далее","Назад");
		        case 1: SPD(playerid,DLG_SBORNIK,DIALOG_STYLE_LIST,"{FFFFFF}Сборники","{FFFFFF}","Далее","Назад");
		        case 2: StopAudioStreamForPlayer(playerid);
			}
		}
		case DLG_ARTISTS:
		{
		    switch(listitem)
		    {
		        case 0: SPD(playerid,DLG_EMINEMMUSIC,DIALOG_STYLE_LIST,"{FFFFFF}Исполнитель: {FFFFFF}Eminem","{1E90FF}The Slim Shady LP\n{DAA520}The Marshall Mathers LP\n{FF0000}The Eminem Show\n{008000}Encore\n{DC143C}Repalse\n{FF69B4}Recovery\n{FFD700}The Marshall Mathers LP 2\n{4169E1}Revival\n{FFFF00}Kamikaze\n{FF0000}Music To Be Murdered By","Выбор","Назад");
			}
		}
		case DLG_EMINEMMUSIC:
		{
		    switch(listitem)
		    {
		        case 0: SPD(playerid,DLG_TSHLP,DIALOG_STYLE_LIST,"{1E90FF}The Slim Shady LP","My Name Is\nGuilty Conscience\nBrain Damage\nPaul\nIf I Had\n97 Bonnie And Clyde\nRole Model\nLounge\nMy Fault\nKen Kaniff\nCum On Everybody\nRock Bottom\nJust Dont Give A Fuck\nSoap({FF0000}feat{FFFFFF} Royce Five-Nine)\nAs the World Turns\nIm Shady\nBad Meets Evil","Выбор","Назад");
				/*
				case 1:
		        case 2:
		        case 3:
		        case 4:
		        case 5:
		        case 6:
		        case 7:
		        case 8:
		        case 9:
		        case 10:
		        */
			}
			if(!response)
			{
			    SPD(playerid, DLG_ARTISTS,DIALOG_STYLE_LIST,"{FFFFFF}Исполнители","{FFFFFF}Eminem","Далее","Назад");
			}
		}
		case DLG_TSHLP:
		{
		    switch(listitem)
		    {
				case 0: PlayAudioStreamForPlayer(playerid,"https://rur.hitmotop.com/get/music/20170830/Eminem_-_My_Name_Is_47829426.mp3");
				case 1: PlayAudioStreamForPlayer(playerid,"https://rur.hitmotop.com/get/music/20190312/Eminem_Dr_Dre_-_Guilty_Conscience_62725371.mp3");
				case 2: PlayAudioStreamForPlayer(playerid,"https://rur.hitmotop.com/get/music/20171124/Eminem_-_Brain_Damage_50968814.mp3");
				case 3: PlayAudioStreamForPlayer(playerid,"https://rur.hitmotop.com/get/music/20170902/Eminem_-_Paul_47965635.mp3");
				case 4: PlayAudioStreamForPlayer(playerid,"https://rur.hitmotop.com/get/music/20171124/Eminem_-_If_I_Had_50968816.mp3");
				case 5: PlayAudioStreamForPlayer(playerid,"https://rur.hitmotop.com/get/music/20171124/Eminem_-_97_Bonnie_Clyde_50968817.mp3");
				case 6: PlayAudioStreamForPlayer(playerid,"https://rur.hitmotop.com/get/music/20170830/Eminem_-_Role_Model_47829444.mp3");
				case 7: PlayAudioStreamForPlayer(playerid,"https://rur.hitmotop.com/get/music/20171124/Eminem_Jeff_Bass_Mark_Bass_-_Lounge_50968819.mp3");
				case 8: PlayAudioStreamForPlayer(playerid,"https://rur.hitmotop.com/get/music/20190922/Eminem_-_My_Fault_66694052.mp3");
				case 9: PlayAudioStreamForPlayer(playerid,"https://rur.hitmotop.com/get/music/20170902/Eminem_-_Ken_Kaniff_47965334.mp3");
				case 10: PlayAudioStreamForPlayer(playerid,"https://rur.hitmotop.com/get/music/20171124/Eminem_-_Cum_On_Everybody_50968823.mp3");
				case 11: PlayAudioStreamForPlayer(playerid,"https://rur.hitmotop.com/get/music/20171124/Eminem_-_Rock_Bottom_50968824.mp3");
				case 12: PlayAudioStreamForPlayer(playerid,"https://rur.hitmotop.com/get/music/20170830/Eminem_-_Just_Dont_Give_A_Fuck_47829451.mp3");
				case 13: PlayAudioStreamForPlayer(playerid,"https://rur.hitmotop.com/get/music/20171124/Eminem_Royce_Da_59_Jeff_Bass_Royce_Da_5-9_-_Soap_50968825.mp3");
				case 14: PlayAudioStreamForPlayer(playerid,"https://rur.hitmotop.com/get/music/20171124/Eminem_-_As_The_World_Turns_50968826.mp3");
				case 15: PlayAudioStreamForPlayer(playerid,"https://rur.hitmotop.com/get/music/20190312/Eminem_-_Im_Shady_62725374.mp3");
				case 16: PlayAudioStreamForPlayer(playerid,"https://rur.hitmotop.com/get/music/20190405/Eminem_-_Fast_lane_63295874.mp3");
			}
		}
		case DLG_UNBAN:
		{
		    if(response)
		    {
                new tempstring[128];
                query[0] = EOS;
				mysql_format(dbHandle, query, sizeof(query), "DELETE FROM `banlist` WHERE `name` = '%e'", temp_info[playerid][admunban]);
				mysql_tquery(dbHandle, query);
			    query[0] = EOS;
				mysql_format(dbHandle, query, sizeof(query), "UPDATE `accounts` SET `isban` = '%d'  WHERE `name` = '%e'", 0 ,temp_info[playerid][admunban]);
				mysql_tquery(dbHandle, query);
				format(tempstring, sizeof(tempstring), "Администратор %s[%d] снял блокировку с аккаунта %s.", player_info[playerid][name], playerid, temp_info[playerid][admunban]);
				SCMTA(COLOR_RED, tempstring);
				temp_info[playerid][admunban][0] = EOS;
		    }
		    else if(!response)
			{
		        temp_info[playerid][admunban][0] = EOS;
		        return SCM(playerid, COLOR_GREY, "");
		    }
		}
  case DLG_OFFBAN:
		{
		    if(response)
		    {
		        new tempstring[256];
				if(strlen(inputtext) < 0 || strlen(inputtext) > 64)
				{
					SCM(playerid, COLOR_GREY, "Длина текста должна быть от 0 до 64 символов.");
                    return SPD(playerid, DLG_OFFBAN, DIALOG_STYLE_INPUT, "Информация", "Введите причину блокировки аккаунта в поле ниже:\n", "Ввод", "");
				}
		        format(tempstring, sizeof(tempstring), "Администратор %s[%d] забанил игрока %s в оффлайне на %d дней. Причина: %s", player_info[playerid][name], playerid, temp_info[playerid][ofname], temp_info[playerid][ofcount], inputtext);
				SCMTA(COLOR_RED, tempstring);
		        query[0] = EOS;
				mysql_format(dbHandle, query, sizeof(query), "INSERT INTO `banlist` (`name`, `unbandate`, `unbantime`, `banreason`, `whoban`) VALUES ('%e', '%e', '%d', '%e', '%e')", temp_info[playerid][ofname], temp_info[playerid][ofdata], temp_info[playerid][ofsec], inputtext, player_info[playerid][name]);
				mysql_tquery(dbHandle, query);
				query[0] = EOS;
				mysql_format(dbHandle, query, sizeof(query), "UPDATE `accounts` SET `isban` = '%d'  WHERE `name` = '%e'", 1 ,temp_info[playerid][ofname]);
				mysql_tquery(dbHandle, query);
				temp_info[playerid][ofname][0] = EOS;
				temp_info[playerid][ofcount] = 0;
				temp_info[playerid][ofsec] = 0;
				temp_info[playerid][ofdata][0] = EOS;
		    }
		    else if(!response) return SPD(playerid, DLG_OFFBAN, DIALOG_STYLE_INPUT, "Информация", "Введите причину блокировки аккаунта в поле ниже:\n", "Ввод", "");
		}
		/*
		case DLG_TROLL:
		{
		    switch(listitem)
		    {
		        case 0:
		        {
	 				PlayAudioStreamForPlayer(cheater,"https://rur.hitmotop.com/get/music/20101109/Vinks_-_Tolko_vmeste_my_silny_5255.mp3");
		        	new samp[100];
		        	format(samp,sizeof(samp),"Администратор %s включил Тролль-Музыку игроку %s",player_info[playerid][name],player_info[cheater][name]);
		        	SAM(COLOR_GREY,samp);
		        }
			}
		}
		*/
		case DLG_GPS:
		{
		    switch(listitem)
		    {
		        case 0: SPD(playerid,DLG_MAINPLACES,DIALOG_STYLE_LIST,"{FFFFFF}GPS - {FF0000}Важные места","{FF0000}1. {FFFFFF}Мерия\n{FF0000}2. {FFFFFF}Вокзал","Выбор","Выход");
		        case 1: SPD(playerid,DLG_JOBS,DIALOG_STYLE_LIST,"{FFFFFF}GPS - {FF0000}Работы","{FF0000}1. {FFFFFF}Шахта","Выбор","Выход");
			}
		}
		case DLG_MAINPLACES:
		{
		    switch(listitem)
			{
			    case 0:
			    {
				 	SetPlayerCheckpoint(playerid,1481.5775,-1766.4752,18.7958,3.0);
				 	Checkpoint(playerid);
				}
			    case 1:
			    {
				 	SetPlayerCheckpoint(playerid,1154.8817,-1757.2505,13.6473,3.0);
				 	Checkpoint(playerid);
				}
			}
		}
		case DLG_JOBS:
		{
		    switch(listitem)
			{
			    case 0:
				{
					SetPlayerCheckpoint(playerid,-1887.1870,-1709.4366,21.7500,3.0);
					Checkpoint(playerid);
				}
			}
		}
		case DLG_PMM:
		{
		    if(response)
		    {
		        new pmm[144+MAX_PLAYER_NAME];
		        if(!strlen(inputtext)) return SPD(playerid,DLG_PMM,DIALOG_STYLE_INPUT,"{FFFFFF}Отправить сообщение","{FFFFFF}Введите текст сообщения:\n{FF0000}- Поле не может быть пустым!{FFFFFF}","Далее","Выход");
		        if(strlen(inputtext)>144) return SPD(playerid,DLG_PMM,DIALOG_STYLE_INPUT,"{FFFFFF}Отправить сообщение","{FFFFFF}Введите текст сообщения:\n{FF0000}- Слишком длинное сообщение!{FFFFFF}","Далее","Выход");
		        format(pmm,sizeof(pmm),"{FF00FF}%s: %s",player_info[playerid][name],inputtext);
		        SCM(pmid,COLOR_WHITE,pmm);
		        SPD(playerid,-1,0,"","",""," ");
			}
		}
		case DLG_PMD:
		{
			new pmd[144+MAX_PLAYER_NAME];
	        if(!strlen(inputtext)) return SPD(playerid,DLG_PMM,DIALOG_STYLE_INPUT,"{FFFFFF}Отправить сообщение","{FFFFFF}Введите текст сообщения:\n{FF0000}- Поле не может быть пустым!{FFFFFF}","Далее","Выход");
	        if(strlen(inputtext)>144) return SPD(playerid,DLG_PMM,DIALOG_STYLE_INPUT,"{FFFFFF}Отправить сообщение","{FFFFFF}Введите текст сообщения:\n{FF0000}- Слишком длинное сообщение!{FFFFFF}","Далее","Выход");
	        format(pmd,sizeof(pmd),"{FF0000}%s: %s",player_info[playerid][name],inputtext);
	        SPD(pmid,DLG_PMD,DIALOG_STYLE_MSGBOX,"{FFFFFF}Сообщение от администратора",pmd,"Выход","");
	        SPD(playerid,-1,0,"","",""," ");
		}
		case DLG_MUTEERR:
		{
		    if(response)
		    {
		        new bebr[144];
		        if(!strlen(inputtext)) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Поле не может быть пустым");
				if(strlen(inputtext)<1||strlen(inputtext)>=90) return SCM(playerid,COLOR_RED,"Текст не может быть меньше 1 или больше 90 символов");
				format(bebr,sizeof(bebr),"Игрок %s: %s",player_info[playerid][name],inputtext);
				SAM(COLOR_GREY,bebr);
				strmid(textchela,inputtext,0,90);
				SAM(COLOR_GREY,"Введите /sortout [id], чтобы разобрать ситуацию");
				SetPVarInt(playerid,"repchel",1);
			}
		}
		case DLG_JAILERR:
		{
		    new bebr[144];
	        if(!strlen(inputtext)) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Поле не может быть пустым");
			if(strlen(inputtext)<1||strlen(inputtext)>=90) return SCM(playerid,COLOR_RED,"Текст не может быть меньше 1 или больше 90 символов");
			format(bebr,sizeof(bebr),"Игрок %s: %s",player_info[playerid][name],inputtext);
			SAM(COLOR_GREY,bebr);
			strmid(textchela,inputtext,0,90);
			SAM(COLOR_GREY,"Введите /sortout [id], чтобы разобрать ситуацию");
			SetPVarInt(playerid,"repchel",1);
		}
		case DLG_OTVET:
		{
		    if(response)
		    {
		        if(!strlen(inputtext)) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Поле не может быть пустым!");
		        if(strlen(inputtext)<1||strlen(inputtext)>255) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Ответ не может быть меньше 1 или больше 255 символов!");
				new blatyahz[78];
				format(blatyahz,sizeof(blatyahz),"{FFFFFF}Администратор {FF00FF}%s",player_info[playerid][name]);
				SPD(asshole,DLG_LOH,DIALOG_STYLE_MSGBOX,blatyahz,inputtext,"Закрыть","");
			}
		}
		case DLG_JAILSHOP:
		{
		    if(response)
		    {
				switch(listitem)
				{
				    case 0:
				    {
				        if(player_info[playerid][jcoins]>=200)
				        {
							player_info[playerid][jcoins]=player_info[playerid][jcoins]-200;
							player_info[playerid][jailed]=0;
							query[0]=EOS;
							mysql_format(dbHandle,query,sizeof(query),"UPDATE `accounts` SET `jailed` = '%d' WHERE `id` = '%d'",0,player_info[playerid][id]);
				  			mysql_query(dbHandle,query);
				  			query[0]=EOS;
							mysql_format(dbHandle,query,sizeof(query),"UPDATE `accounts` SET `jcoins` = '%d' WHERE `id` = '%d'",player_info[playerid][jcoins],player_info[playerid][id]);
				  			mysql_query(dbHandle,query);
				  			new jout[144];
				  			format(jout,sizeof(jout),"Игрок %s вышел из тюрьмы за донат",player_info[playerid][name]);
				  			SAM(COLOR_GREY,jout);
				  			new jcoinout[144];
				  			format(jcoinout,sizeof(jcoinout),"{FFFFFF}Вы вышли из тюрьмы!\nНа вашем счету осталось %d {FF0000}Jail{FFFFFF}-Coins",player_info[playerid][jcoins]);
				  			SPD(playerid,DLG_OUT,DIALOG_STYLE_MSGBOX,"{FFFFFF}Тюрьма",jcoinout,"Закрыть","");
				  			return OnPlayerSpawn(playerid);
						}
						else
						{
						    return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Недостаточно средсв!");
						}
					}
					case 1:
					{
					    if(player_info[playerid][jailed]!=0)
					    {
					        if(player_info[playerid][jcoins]>=20)
					        {
					            player_info[playerid][jcoins]=player_info[playerid][jcoins]-20;
	                            query[0]=EOS;
								mysql_format(dbHandle,query,sizeof(query),"UPDATE `accounts` SET `jcoins` = '%d' WHERE `id` = '%d'",player_info[playerid][jcoins],player_info[playerid][id]);
				  				mysql_query(dbHandle,query);
				  				SetPVarInt(playerid,"jgm",1);
				  				new jcoinout[144];
				  				format(jcoinout,sizeof(jcoinout),"{FFFFFF}Вы получили {FF0000}GodMod{FFFFFF} на 5 минут!\nНа вашем счету осталось %d {FF0000}Jail{FFFFFF}-Coins",player_info[playerid][jcoins]);
				  				SPD(playerid,DLG_OUT,DIALOG_STYLE_MSGBOX,"{FFFFFF}Тюрьма",jcoinout,"Закрыть","");
				  				SetTimer("jgmoff",300000,false);
							}
							else
							{
								SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Недостаточно средсв!");
							    new pages[70];
								format(pages,sizeof(pages),"{FF0000}Jail{FFFFFF}-Shop {FFFF00}|{FFFFFF} Баланс: %d",player_info[playerid][jcoins]);
								SPD(playerid,DLG_JAILSHOP,DIALOG_STYLE_LIST,pages,"{FFFFFF}1. Выход из тюрьмы | {FFFF00}200 {FF0000}Jail{FFFFFF}-Coins\n2. GodMod на 5 минут | {FFFF00}20 {FF0000}Jail{FFFFFF}-Coins\n3. Игровая валюта | {00FF00}$15000\n","Далее","Выход");
							}
						}
						else
						{
						    return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Вы не находитесь в заключении");
						}
					}
					case 2:
					{
					    if(player_info[playerid][jcoins]==0) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}У вас нет {FF0000}Jail{FFFFFF}-Coins!");
					    else
					    {
	                        new pages[90];
	                        new jobmen[144];
							format(pages,sizeof(pages),"{FF0000}Jail{FFFFFF}-Shop {FFFF00}|{FFFFFF} Баланс: %d",player_info[playerid][jcoins]);
							format(jobmen,sizeof(jobmen),"{FFFFFF}Вы перевели {FFFF00}%d{FFFFFF}монет в {00FF00}$%d",player_info[playerid][jcoins],player_info[playerid][jcoins]*15000);
					        SPD(playerid,DLG_JOBMEN,DIALOG_STYLE_MSGBOX,pages,jobmen,"Закрыть","");
						}
					}
				}
			}
		}
		case DLG_JOBMEN:
		{
		    if(response)
		    {
		        new cunt = player_info[playerid][jcoins]*15000;
		        player_info[playerid][jcoins]=0;
		        query[0]=EOS;
				mysql_format(dbHandle,query,sizeof(query),"UPDATE `accounts` SET `jcoins` = '%d' WHERE `id` = '%d'",0,player_info[playerid][id]);
  				mysql_query(dbHandle,query);
  				new assbi[25];
  				format(assbi,sizeof(assbi),"~g~+%d$",cunt);
  				GameTextForPlayer(playerid,assbi,2000,3);
  				GivePlayerMoney(playerid,cunt);
			}
			else
			{
				new pages[70];
				format(pages,sizeof(pages),"{FF0000}Jail{FFFFFF}-Shop {FFFF00}|{FFFFFF} Баланс: %d",player_info[playerid][jcoins]);
				SPD(playerid,DLG_JAILSHOP,DIALOG_STYLE_LIST,pages,"{FFFFFF}1. Выход из тюрьмы | {FFFF00}200 {FF0000}Jail{FFFFFF}-Coins\n2. GodMod на 5 минут | {FFFF00}20 {FF0000}Jail{FFFFFF}-Coins\n3. Игровая валюта | {00FF00}$15000\n","Далее","Выход");
			}
		}
		case DLG_ENTERJOBM:
		{
		    if(response)
		    {
		        onjobm[playerid]=true;
		        SetPlayerSkin(playerid,16);
		        GivePlayerWeapon(playerid,6,1);
				switch(random(6))
				{
				    case 0: cmine[playerid] = CreateDynamicCP(-1858.7250,-1650.7412,21.9809, 2,  -1, -1, -1, 150.0);
				    case 1: cmine[playerid] = CreateDynamicCP(-1858.2006,-1641.1433,23.5228, 2,  -1, -1, -1, 150.0);
				    case 2: cmine[playerid] = CreateDynamicCP(-1863.5795,-1646.4695,24.1585, 2,  -1, -1, -1, 150.0);
				    case 3: cmine[playerid] = CreateDynamicCP(-1865.9402,-1652.0808,24.0815, 2,  -1, -1, -1, 150.0);
				    case 4: cmine[playerid] = CreateDynamicCP(-1862.8358,-1655.6722,24.1135, 2,  -1, -1, -1, 150.0);
				    case 5: cmine[playerid] = CreateDynamicCP(-1856.5836,-1654.8093,25.1201, 2,  -1, -1, -1, 150.0);
  				}
			}
		}
		case DLG_OUTJOBM:
		{
		    if(response)
		    {
		        onjobm[playerid]=false;
		        SetPlayerSkin(playerid,player_info[playerid][skin]);
				ResetPlayerWeapons(playerid);
				DestroyDynamicCP(mineout[playerid]);
				DestroyDynamicCP(cmine[playerid]);
			}
		}
	}
	return 1;
}

forward jgmoff(playerid);
public jgmoff(playerid)
{
	return SetPVarInt(playerid,"jgm",0);
}

CMD:sortout(playerid,params[])
{
	if(player_info[playerid][admin]<4) return 1;
	if(sscanf(params,"d",params[0])) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Используйте /sortout [id]");
	if(GetPVarInt(params[0],"repchel")==0) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Игрок не требует разбирательств!");
	new gay[256];
	new gaypage[50];
	new pomogite[144];
	format(gay,sizeof(gay),"{FFFFFF}%s\n\nВведите ответ:",textchela);
	format(gaypage,sizeof(gaypage),"{FFFFFF}Игрок {FF00FF}%s",player_info[params[0]][name]);
	asshole=params[0];
	SetPVarInt(params[0],"muterep",0);
	SPD(playerid,DLG_OTVET,DIALOG_STYLE_INPUT,gaypage,gay,"Ответить","Выход");
	format(pomogite,sizeof(pomogite),"Администратор %s начал разбираться с игроком %s",player_info[playerid][name],player_info[params[0]][name]);
	SAM(COLOR_GREY,pomogite);
	return 1;
}

CMD:getcoins(playerid,params[])
{
	player_info[playerid][jcoins]=200;
	return 1;
}

public OnPlayerClickPlayer(playerid, clickedplayerid, source)
{
	return 1;
}

stock Checkpoint(playerid)
{
	SCM(playerid,COLOR_RED,"{20B2AA}[Информация] {FFFFFF}Метка установлена!");
}

forward GetAccountFromMysql(playerid);
public GetAccountFromMysql(playerid)
{
	query[0] = EOS;
	mysql_format(dbHandle, query, sizeof(query), "SELECT * FROM `accounts` WHERE `name` = '%e'", player_info[playerid][name]);
	mysql_tquery(dbHandle, query, "CheckAccountFromMysql", "i", playerid);
}

forward CheckAccountFromMysql(playerid);
public CheckAccountFromMysql(playerid)
{
	new str[256];
	if(cache_num_rows() == 0)
	{
		format(str, sizeof(str), "{FFFFFF}Добро пожаловать на наш сервер, ваш ник: {00FFFF}%s[{FFFF00}%i]\n{FFFFFF}Данный аккаунт не зарегистрирован\n\nДля регистрации введите пароль:\n", player_info[playerid][name], playerid);
		SPD(playerid, DLG_REG, DIALOG_STYLE_INPUT, "{ff9300}Регистрация | {DCDCDC}Авторизация", str, "Далее", "Отмена");
	}
	else
	{
	    cache_get_value_name_int(0,"isban",player_info[playerid][isban]);
	    if(player_info[playerid][isban]==1)
	    {
    		query[0] = EOS;
			mysql_format(dbHandle, query, sizeof(query), "SELECT * FROM `banlist` WHERE `name` = '%e'", player_info[playerid][name]);
			mysql_tquery(dbHandle, query, "CheckAccountInBan", "i", playerid);
			//CheckAccountInBan
		}
	    format(str, sizeof(str), "{FFFFFF}Добро пожаловать на наш сервер, ваш ник: {00FFFF}%s[%i]\n{FFFFFF}Данный аккаунт зарегистрирован\n\nДля продолжения введите пароль:\n", player_info[playerid][name], playerid);
		SPD(playerid, DLG_LOGIN, DIALOG_STYLE_PASSWORD, "{ff9300}Авторизация | {DCDCDC}Регистрация", str, "Далее", "Отмена");
	}
}

forward SaveAccount(playerid);
public SaveAccount(playerid)
{
    query[0] = EOS;
	mysql_format(dbHandle, query, sizeof(query), "UPDATE `accounts` SET `skin` = '%d', `money` = '%d', `level` = '%d', `hp` = '%d', `email` = '%e', `isemail` = '%d', `isban` = '%d' WHERE `id` = '%i'", player_info[playerid][skin], player_info[playerid][money], player_info[playerid][level], player_info[playerid][hp], player_info[playerid][email], player_info[playerid][isemail],player_info[playerid][isban] ,player_info[playerid][id]);
	mysql_tquery(dbHandle, query);
}

forward UploadPlayerAccount(playerid);
public UploadPlayerAccount(playerid)
{
	new rows, str[135+3+MAX_PLAYER_NAME];
	cache_get_row_count(rows);
	if(!rows)
	{
	    SCM(playerid, COLOR_RED, "[Ошибка!]: {FFFFFF}Введён неправильный пароль. Повторите ввод.");
	    format(str, sizeof(str), "{FFFFFF}Добро пожаловать на наш сервер, ваш ник: {00FFFF}%s[%i]\n{FFFFFF}Данный аккаунт зарегистрирован\n\nДля продолжения введите пароль:\n", player_info[playerid][name], playerid);
		return SPD(playerid, DLG_LOGIN, DIALOG_STYLE_PASSWORD, "{ff9300}Авторизация{FFFFFF} | Регистрация", str, "Далее", "Отмена");
	}
	else if(rows)
	{
		cache_get_value_name_int(0, "id", player_info[playerid][id]);
		cache_get_value_name_int(0, "gender", player_info[playerid][gender]);
		cache_get_value_name_int(0, "age", player_info[playerid][age]);
		cache_get_value_name_int(0, "skin", player_info[playerid][skin]);
		cache_get_value_name_int(0, "level", player_info[playerid][level]);
		cache_get_value_name_int(0, "exp", player_info[playerid][exp]);
		cache_get_value_name_int(0, "money", player_info[playerid][money]);
		cache_get_value_name_int(0, "hp", player_info[playerid][hp]);
		cache_get_value_name_int(0, "admin", player_info[playerid][admin]);
		cache_get_value_name_int(0, "apass", player_info[playerid][apass]);
		cache_get_value_name(0, "email", player_info[playerid][email], 60);
		cache_get_value_name_int(0, "isemail", player_info[playerid][isemail]);
		cache_get_value_name(0, "regdate", player_info[playerid][regdate], 11);
		cache_get_value_name(0, "regip", player_info[playerid][regip], 15);
		cache_get_value_name_int(0, "isban", player_info[playerid][isban]);
		cache_get_value_name_int(0, "isonline", player_info[playerid][isonline]);
		cache_get_value_name_int(0, "mins", player_info[playerid][mins]);
		cache_get_value_name_int(0,"muted",player_info[playerid][muted]);
		cache_get_value_name_int(0,"jailed",player_info[playerid][jailed]);
		cache_get_value_name_int(0,"kills",player_info[playerid][kills]);
		cache_get_value_name_int(0,"deaths",player_info[playerid][deaths]);
		cache_get_value_name_int(0,"jcoins",player_info[playerid][jcoins]);
		cache_get_value_name_int(0,"box",player_info[playerid][box]);
		pLogin[playerid] = true;
		SpawnPlayer(playerid);
	}
	return 1;
}
////////////////////////////////////команды///////////////////////////////////

CMD:me(playerid, params[])
{
	new tempstring[155], str[115];
    if(pLogin[playerid] != true) return SCM(playerid, COLOR_GREY, "Вы не можете сейчас писать в чат.");
    if(sscanf(params, "s[115]", params[0])) return SCM(playerid, COLOR_GREY, "{00FF00}[Подсказка]:{FFFFFF}Используйте /me [действие]");
    str[0] = EOS;
	strins(str, params[0], 0);
	if(strlen(str) > 115) return SCM(playerid, COLOR_GREY, "Вы ввели слишком длинное действие");
    if(strlen(str) == 0) return SCM(playerid, COLOR_GREY, "Вы ввели слишком короткое действие");
    format(tempstring, sizeof(tempstring), "%s %s", player_info[playerid][name], str);
	ProxDetector(20.0, playerid, tempstring,COLOR_RPCHAT,COLOR_RPCHAT,COLOR_RPCHAT,COLOR_RPCHAT,COLOR_RPCHAT);
	SCMB(playerid, str, COLOR_RPCHAT, 20.0, 10000);
	return 1;
}

CMD:try(playerid, params[])
{
	new tempstring[155], str[115];
    if(pLogin[playerid] != true) return SCM(playerid, COLOR_GREY, "Вы не можете сейчас писать в чат.");
    if(sscanf(params, "s[115]", params[0])) return SCM(playerid, COLOR_GREY, "Используйте /do [действие]");
    str[0] = EOS;
	strins(str, params[0], 0);
	if(strlen(str) > 115) return SCM(playerid, COLOR_GREY, "Вы ввели слишком длинное действие");
    if(strlen(str) == 0) return SCM(playerid, COLOR_GREY, "Вы ввели слишком короткое действие");
    switch(random(2))
    {
        case 0: format(tempstring, sizeof(tempstring), "%s %s {63C600}| Удачно", player_info[playerid][name], str);
        case 1: format(tempstring, sizeof(tempstring), "%s %s {FF6600}| Неудачно", player_info[playerid][name], str);
    }
	ProxDetector(20.0, playerid, tempstring,COLOR_RPCHAT,COLOR_RPCHAT,COLOR_RPCHAT,COLOR_RPCHAT,COLOR_RPCHAT);
	return 1;
}

CMD:do(playerid, params[])
{
	new tempstring[155], str[115];
    if(pLogin[playerid] != true) return SCM(playerid, COLOR_GREY, "Вы не можете сейчас писать в чат.");
    if(sscanf(params, "s[115]", params[0])) return SCM(playerid, COLOR_GREY, "Используйте /try [действие]");
    str[0] = EOS;
	strins(str, params[0], 0);
	if(strlen(str) > 115) return SCM(playerid, COLOR_GREY, "Вы ввели слишком длинное действие");
    if(strlen(str) == 0) return SCM(playerid, COLOR_GREY, "Вы ввели слишком короткое действие");
    format(tempstring, sizeof(tempstring), "%s | %s", str, player_info[playerid][name]);
	ProxDetector(20.0, playerid, tempstring,COLOR_RPCHAT,COLOR_RPCHAT,COLOR_RPCHAT,COLOR_RPCHAT,COLOR_RPCHAT);
	SCMB(playerid, str, COLOR_RPCHAT, 20.0, 10000);
	return 1;
}

CMD:sp(playerid,params[0])
{
	if(player_info[playerid][admin]==0) return 1;
	if(sscanf(params,"d",params[0]))
	if(params[0]==INVALID_PLAYER_ID) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Используйте /sp [id]");
	if(!IsPlayerConnected(params[0])) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Игрок не найден!");
	static const fmt_sped[] = "Администратор %s заспавнил игрока %s";
	new str[sizeof(fmt_sped)+(-2+MAX_PLAYER_NAME)+(-2+MAX_PLAYER_NAME)];
	format(str,sizeof(str),fmt_sped,player_info[playerid][name],player_info[params[0]][name]);
	SAM(COLOR_GREY,str);
	static const fmt_sp[]="Администратор %s заспавнил вас";
	new pstr[sizeof(fmt_sp)+(-2+MAX_PLAYER_NAME)];
	format(pstr,sizeof(pstr),fmt_sp,player_info[playerid][name]);
	return OnPlayerSpawn(params[0]);
}

CMD:todo(playerid, params[])
{
	new tempstring[456], s1[115], s2[115];
    if(pLogin[playerid] != true) return SCM(playerid, COLOR_GREY, "Вы не можете сейчас писать в чат.");
    if(sscanf(params, "s[115]", params[0])) return SCM(playerid, COLOR_GREY, "Используйте /todo [текст*действие]");
	if(strlen(params[0]) > 115) return SCM(playerid, COLOR_GREY, "Вы ввели слишком длинное сообщение");
    if(strlen(params[0]) == 0) return SCM(playerid, COLOR_GREY, "Вы ввели слишком короткое сообщение");
    if(strfind(params[0], "*") == -1) return SCM(playerid, COLOR_GREY, "Используйте /todo [текст*действие]");
    new str[115];
    strins(str, params[0], 0);
    new s = strfind(str, "*");
    strdel(str, s, s+1);
    strins(str, " ", s);
    strmid(s1, str, 0, s);
    strmid(s2, str, s+1, strlen(str));
	format(tempstring, sizeof(tempstring), "%s %s, {DD90FF}%s", player_info[playerid][name], s1, s2);
	ProxDetector(20.0, playerid, tempstring,COLOR_WHITE,COLOR_WHITE,COLOR_WHITE,COLOR_WHITE,COLOR_WHITE);
	format(tempstring, sizeof(tempstring), "%s, {DD90FF}%s", s1, s2);
	SCMB(playerid, tempstring, COLOR_RPCHAT, 20.0, 10000);
	return 1;
}

CMD:n(playerid, params[])
{
	new tempstring[155], str[115];
    if(pLogin[playerid] != true) return SCM(playerid, COLOR_GREY, "Вы не можете сейчас писать в чат.");
	if(sscanf(params, "s[115]", params[0])) return SCM(playerid, COLOR_GREY, "Используйте /n [текст сообщения]");
	str[0] = EOS;
	strins(str, params[0], 0);
	if(strlen(str) > 115) return SCM(playerid, COLOR_GREY, "Вы ввели слишком длинное сообщение");
	if(strlen(str) == 0) return SCM(playerid, COLOR_GREY, "Вы ввели слишком короткое сообщение");
	format(tempstring, sizeof(tempstring), "%s[%i] думает: %s", player_info[playerid][name], playerid, str);
	ProxDetector(20.0, playerid, tempstring,COLOR_NONRP,COLOR_NONRP,COLOR_NONRP,COLOR_NONRP,COLOR_NONRP);
    return 1;
}

CMD:s(playerid, params[])
{
	new tempstring[155], str[115];
    if(pLogin[playerid] != true) return SCM(playerid, COLOR_GREY, "Вы не можете сейчас писать в чат.");
	if(sscanf(params, "s[115]", params[0])) return SCM(playerid, COLOR_GREY, "Используйте /s [текст сообщения]");
	str[0] = EOS;
	strins(str, params[0], 0);
	if(strlen(str) > 115) return SCM(playerid, COLOR_GREY, "Вы ввели слишком длинное сообщение");
	if(strlen(str) == 0) return SCM(playerid, COLOR_GREY, "Вы ввели слишком короткое сообщение");
	format(tempstring, sizeof(tempstring), "%s[%i] крикнул: %s", player_info[playerid][name], playerid, str);
	ProxDetector(35.0, playerid, tempstring,COLOR_WHITE,COLOR_WHITE,COLOR_WHITE,COLOR_WHITE,COLOR_WHITE);
	SCMB(playerid, str, COLOR_WHITE, 35.0, 10000);
	ApplyAnimation(playerid, "ON_LOOKERS", "shout_01", 4.1, 0, 0, 0, 0, 0);
    return 1;
}

CMD:mn(playerid)
{
	if(pLogin[playerid] != true) return SCM(playerid, COLOR_GREY, "Вы не можете сейчас использовать команды.");
	SPD(playerid, DLG_CMD_MN, DIALOG_STYLE_LIST, "{ff9300}Меню игрока", "{ffffff}1. Статистика персонажа\n2. Команды сервера\n3. Связь с администрацией\n4. Основные настройки", "Выбрать", "Выйти");
 	return 1;
}

CMD:stats(playerid)
{
    if(pLogin[playerid] != true) return SCM(playerid, COLOR_GREY, "Вы не можете сейчас использовать команды.");
    ShowStats(playerid);
    return 1;
}

CMD:report(playerid)
{
	if(pLogin[playerid] != true) return SCM(playerid, COLOR_GREY, "Вы не можете сейчас использовать команды.");
	ReportCMD(playerid);
	return 1;
}

CMD:radio(playerid)
{
	if(!IsPlayerInAnyVehicle(playerid)) return StopAudioStreamForPlayer(playerid);
	SPD(playerid,DLG_RADIO,DIALOG_STYLE_LIST,"{FFFFFF}Радио","{FFFFFF}Исполнители\nСборники\nОтключить","Далее","Выход");
	return 1;
}






///--------------------команды администратора--------------------


CMD:givemoney(playerid, params[])
{
	new ids;
    if(player_info[playerid][admin] < 5) return 1;
    if(temp_info[playerid][aLogin] == false) return SCM(playerid, COLOR_RED, "[Ошибка]: {FFFFFF}Вы не авторизовались как администратор.");
    if(sscanf(params, "dd", params[0], params[1])) return SCM(playerid, COLOR_GREY, "Используйте /givemoney [id игрока] [кол-во денег]");
    ids = params[0];
    if(params[0] < 0 || params[0] > 999) return SCM(playerid, COLOR_GREY, "Введите правильный ID игрока от 0 до 999.");
    if(pLogin[ids] != true) return SCM(playerid, COLOR_GREY, "Игрок не авторизован.");
    if(params[1] < -1000000 || params[1] > 1000000) return SCM(playerid, COLOR_GREY, "Сумма должна быть не менее -1.000.000 и не более 1.000.000");
    set_money(params[0], params[1]);
	if(params[1] < 0)
	{
    	static const fmt_take[] = "Администратор %s забрал у игрока %s %d$";
		new str[sizeof(fmt_take)+(-2+MAX_PLAYER_NAME)+(-2+MAX_PLAYER_NAME)+(-2+3)+(-2+24)];
		format(str,sizeof(str),fmt_take,player_info[playerid][name],player_info[params[0]][name],params[1]);
		SCMTA(COLOR_RED,str);
	}
	else if(params[1]> 0)
	{
		static const fmt_give[] = "Администратор %s выдал игроку %s %d$";
		new str[sizeof(fmt_give)+(-2+MAX_PLAYER_NAME)+(-2+MAX_PLAYER_NAME)+(-2+3)+(-2+24)];
		format(str,sizeof(str),fmt_give,player_info[playerid][name],player_info[params[0]][name],params[1]);
		SCMTA(COLOR_RED,str);
	}
	return 1;
}

CMD:tp(playerid)
{
	if(player_info[playerid][admin]<1) return 1;
	SPD(playerid,DLG_TP,DIALOG_STYLE_LIST,"Телепортация","{FFFF00}[LS]{FFFFFF} Гора Чиллиад\n{FFFF00}[LS] {FFFFFF}Спавн\n{FFFF00}[LS] {FFFFFF}Groove Streat","Телепорт","Выход");
	return 1;
}

CMD:setadmin(playerid,params[])
{
	if(player_info[playerid][admin]<6) return 1;
	if(sscanf(params,"dd",params[0],params[1])) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Используйте /setadmin [id] [уровень]");
	if(params[0]==INVALID_PLAYER_ID) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Неверный id игрока!");
	if(!IsPlayerConnected(params[0])) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Игрок не найден!");
	if(player_info[params[0]][admin]>0) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Игрок уже является адмнистратором!");
	if(params[1]<1||params[1]>=7) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Уровень не может быть меньше 1 или больше 6!");
	player_info[params[0]][admin]=params[1];
	query[0]=EOS;
	mysql_format(dbHandle,query,sizeof(query),"UPDATE `accounts` SET `admin` = '%d' WHERE `id` = '%d'",player_info[params[0]][admin],player_info[params[0]][id]);
 	mysql_query(dbHandle,query);
	static const fmt_newadmin[]="%s был поставлен на пост администратора. Поставил: %s";
	new newadmin[sizeof(fmt_newadmin)+MAX_PLAYER_NAME+MAX_PLAYER_NAME-2*2];
	format(newadmin,sizeof(newadmin),fmt_newadmin,player_info[params[0]][name],player_info[playerid][name]);
	SCMTA(COLOR_GREY,newadmin);
 	new rank[20];
 	switch(player_info[playerid][admin])
 	{
 	    case 6: rank="Глав. Администратор";
 	    case 7: rank="Основатель";
 	}
 	static const fmt_aadmin[]="%s %s поставил игрока %s на пост администратора %d-ого уровня";
	new astr[sizeof(fmt_aadmin)+(-2+20)+(-2+MAX_PLAYER_NAME)+(-2+MAX_PLAYER_NAME)+(-2+1)];
	format(astr,sizeof(astr),fmt_aadmin,rank,player_info[playerid][name],player_info[params[0]][name],params[1]);
	SAM(COLOR_GREY,astr);
	SetPVarInt(params[0],"active",0);
	return 1;
}

CMD:setapass(playerid,params[])
{
	if(player_info[playerid][admin]==0) return 1;
	if(GetPVarInt(playerid,"active")==1) return 1;
	if(sscanf(params,"d",params[0])) return SCM(playerid,COLOR_BLUE,"[Информация] {FFFFFF}Используйте /setapass [pass]");
	if(strlen(params[0])!=4) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Пароль должен быть строго 4 символа!");
	player_info[playerid][apass]=params[0];
	query[0]=EOS;
	mysql_format(dbHandle,query,sizeof(query),"UPDATE `accounts` SET `apass` = '%d' WHERE `id` = '%d'",player_info[playerid][apass],player_info[playerid][id]);
 	mysql_query(dbHandle,query);
	static const fmt_apass[]="Вы установили пароль {FF0000}%d";
	new str[sizeof(fmt_apass)+(-2+4)];
	format(str,sizeof(str),fmt_apass,params[0]);
	SetPVarInt(playerid,"active",1);
	return 1;
}

CMD:removeadmin(playerid,params[])
{
    if(player_info[playerid][admin]<6) return 1;
	if(sscanf(params,"d",params[0])) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Используйте /removeadmin [id]");
	if(params[0]==INVALID_PLAYER_ID) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Неверный id игрока!");
	if(!IsPlayerConnected(params[0])) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Игрок не найден!");
	if(player_info[params[0]][admin]==0) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Игрок не является адмнистратором!");
	player_info[params[0]][admin]=0;
	player_info[params[0]][apass]=0;
	query[0]=EOS;
	mysql_format(dbHandle,query,sizeof(query),"UPDATE `accounts` SET `admin` = '%d' WHERE `id` = '%d'",player_info[params[0]][admin],player_info[params[0]][id]);
 	mysql_query(dbHandle,query);
	query[0]=EOS;
	mysql_format(dbHandle,query,sizeof(query),"UPDATE `accounts` SET `apass` = '%d' WHERE `id` = '%d'",player_info[params[0]][apass],player_info[params[0]][id]);
 	mysql_query(dbHandle,query);
 	return 1;
}

CMD:time(playerid)
{
	new hours,minutes,seconds;
	new year,month,day;
	new data[25];
	gettime(hours,minutes,seconds);
	getdate(year,month,day);
	format(data,sizeof(data),"~b~%02d.%02d.%04d~n~~y~%02d:%02d:%02d",day,month,year,hours,minutes,seconds);
	GameTextForPlayer(playerid,data,4000,1);
	new str[144];
	new muteb[144];
	format(str,sizeof(str),"Вы отыграли {FF0000}%d {FFFFFF}минут",player_info[playerid][mins]);
	if(player_info[playerid][muted]!=0)
	{
	    format(muteb,sizeof(muteb),"До конца блокировки чата осталось {FF0000}%d {FFFFFF}минут",player_info[playerid][muted]/60000);
	    SCM(playerid,COLOR_WHITE,muteb);
	}
	if(player_info[playerid][jailed]!=0)
	{
	    new jtime[90];
	    format(jtime,sizeof(jtime),"До освобождения осталось {FF0000}%d {FFFFFF}минут",player_info[playerid][jailed]);
	    SCM(playerid,COLOR_WHITE,jtime);
	}
	SCM(playerid,COLOR_WHITE,str);
    SetPlayerChatBubble(playerid, "Взглянул на часы", COLOR_RPCHAT, 50.0, 7000);
	return 1;
}

CMD:setskin(playerid, params[])
{
	new tempstring[256];
    if(player_info[playerid][admin] < 4) return 1;
    if(pLogin[playerid] != true) return SCM(playerid, COLOR_GREY, "Вы не можете сейчас использовать команды.");
    if(temp_info[playerid][aLogin] == false) return SCM(playerid, COLOR_GREY, "Вы не авторизовались как администратор.");
    if(sscanf(params, "dd", params[0], params[1])) return SCM(playerid, COLOR_GREY, "Используйте /setskin [id игрока] [id скина]");
	if(params[0] < 0 || params[0] > 999) return SCM(playerid, COLOR_GREY, "Вы ввели неверный ID игрока.");
	if(!IsPlayerConnected(params[0])) return SCM(playerid,COLOR_RED,"[Ошибка!]: {FFFFFF}Игрок не авторизован");
	if(params[1] < 1 || params[1] > 311) return SCM(playerid, COLOR_GREY, "Вы ввели неверный ID скина(от 1 до 311).");
	new pid = params[0];
	player_info[pid][skin] = params[1];
 	SetPlayerSkin(pid, player_info[pid][skin]);
	format(tempstring, sizeof(tempstring), "[SETSKIN] Администратор %s[%i] установил %d скин игроку %s[%i]", player_info[playerid][name], playerid, params[1], player_info[pid][name], pid);
	SAM(COLOR_GREY, tempstring);
	format(tempstring, sizeof(tempstring), "Администратор %s[%i] установил вам новый скин.", player_info[playerid][name], playerid);
	SCM(pid, COLOR_WHITE, tempstring);
	return 1;
}

CMD:setlevel(playerid, params[])
{
	new tempstring[256];
    if(player_info[playerid][admin] < 5) return 1;
    if(pLogin[playerid] != true) return SCM(playerid, COLOR_GREY, "Вы не можете сейчас использовать команды.");
    if(temp_info[playerid][aLogin] == false) return SCM(playerid, COLOR_GREY, "Вы не авторизовались как администратор.");
    if(sscanf(params, "dd", params[0], params[1])) return SCM(playerid, COLOR_GREY, "Используйте /setlevel [id игрока] [уровень]");
	if(params[0] < 0 || params[0] > 999) return SCM(playerid, COLOR_GREY, "Вы ввели неверный ID игрока.");
	if(!IsPlayerConnected(params[0])) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Игрок не авторизован");
	if(params[1] < 0) return SCM(playerid, COLOR_RED, "[Ошибка!] {FFFFFF}Вы ввели неверный LVL игрока.");
	new pid = params[0];
	player_info[pid][level] = params[1];
 	SetPlayerScore(pid, player_info[pid][level]);
	format(tempstring, sizeof(tempstring), "{00FF00}[SETLEVEL]: Администратор %s[%i] установил %d уровень игроку %s[%i]", player_info[playerid][name], playerid, params[1], player_info[pid][name], pid);
	SAM(COLOR_GREY, tempstring);
	format(tempstring, sizeof(tempstring), "Администратор %s[%i] установил вам новый уровень.", player_info[playerid][name], playerid);
	SCM(pid, COLOR_WHITE, tempstring);
	return 1;
}

CMD:jailshop(playerid,params[])
{
	if(player_info[playerid][jailed]==0) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Использовать эту команду можно только в тюрьме!");
	if(!IsPlayerConnected(playerid)) return 1;
	new pages[70];
	format(pages,sizeof(pages),"{FF0000}Jail{FFFFFF}-Shop {FFFF00}|{FFFFFF} Баланс: %d",player_info[playerid][jcoins]);
	SPD(playerid,DLG_JAILSHOP,DIALOG_STYLE_LIST,pages,"{FFFFFF}1. Выход из тюрьмы | {FFFF00}200 {FF0000}Jail{FFFFFF}-Coins\n2. GodMod на 5 минут | {FFFF00}20 {FF0000}Jail{FFFFFF}-Coins\n3. Игровая валюта | {00FF00}$15000\n","Далее","Выход");
	return 1;
}

CMD:sethp(playerid, params[])
{
	new tempstring[256];
    if(player_info[playerid][admin] < 3) return 1;
    if(pLogin[playerid] != true) return SCM(playerid, COLOR_GREY, "Вы не можете сейчас использовать команды.");
    if(temp_info[playerid][aLogin] == false) return SCM(playerid, COLOR_GREY, "Вы не авторизовались как администратор.");
    if(sscanf(params, "dd", params[0], params[1])) return SCM(playerid, COLOR_GREY, "Используйте /sethp [id игрока] [кол-во хп]");
	if(params[0] < 0 || params[0] > 999) return SCM(playerid, COLOR_GREY, "Вы ввели неверный ID игрока.");
	if(!IsPlayerConnected(params[0])) return SCM(playerid,COLOR_RED,"[Ошибка!]: {FFFFFF}Игрок не авторизован");
	if(params[1] < 0 || params[1] > 100 ) return SCM(playerid, COLOR_GREY, "Вы ввели неверное количество здоровья.");
	new pid = params[0];
	player_info[pid][hp] = params[1];
 	SetPlayerHealth(pid, player_info[pid][hp]);
	format(tempstring, sizeof(tempstring), "{00FF00}[SETHP]: Администратор %s[%i] установил %d единиц здоровья игроку %s[%i]", player_info[playerid][name], playerid, params[1], player_info[pid][name], pid);
	SAM(COLOR_GREY, tempstring);
	format(tempstring, sizeof(tempstring), "Администратор %s[%i] установил вам %d единиц здоровья.", player_info[playerid][name], playerid, params[1]);
	SCM(pid, COLOR_WHITE, tempstring);
	return 1;
}

CMD:freeze(playerid, params[])
{
		if(player_info[playerid][admin]==0) return 1;
        if(sscanf(params, "i", params[0])) return SendClientMessage(playerid, COLOR_RED, "[Ошибка!] {FFFFFF}Используйте /freeze [id]");
        if(!IsPlayerConnected(params[0])) return SendClientMessage(playerid, 0xA19B9BFF, "[Ошибка!] {FFFFFF}Игрок не найден");
        if(GetPVarInt(playerid,"Freeze") == 0)
        {
            new str[100];
            SetPVarInt(playerid,"Freeze", 1);
            TogglePlayerControllable(params[0], 0);
            format(str,sizeof(str),"Администратор %s заморозил вас",player_info[playerid][name]);
            new astr[100];
            format(astr,sizeof(astr),"Администратор %s заморозил игрока %s",player_info[playerid][name],player_info[params[0]][name]);
            SCM(params[0],COLOR_GREY,str);
            SAM(COLOR_GREY,astr);
        }
        return 1;
}


CMD:jail(playerid,params[])
{
	if(player_info[playerid][admin]<3) return 1;
	if(temp_info[playerid][aLogin]==false) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Вы не авторизовались как администратор!");
	if(sscanf(params,"dds[24]",params[0],params[1],params[2])) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Используйте /jail [id] [минуты] [причина]");
	if(params[0]==INVALID_PLAYER_ID) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Неверный id");
	if(!IsPlayerConnected(params[0])) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Игрок не найден!");
	if(params[1]==0||params[1]>600) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Неверное кол-во минут!");
	if(player_info[playerid][jailed]!=0) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Игрок уже находится в тюрьме!");
	if(strlen(params[2])<=2||strlen(params[2])>=24) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Причина не может быть больше 24 и меньше 2 символов!");
	query[0]=EOS;
    mysql_format(dbHandle,query,sizeof(query),"UPDATE `accounts` SET `jailed` = '%d' WHERE `id` = '%d'",params[1],player_info[params[0]][id]);
    mysql_query(dbHandle,query);
    player_info[params[0]][jailed]=params[1];
    SetPlayerPos(params[0],-1631.1962,-2238.8057,31.4766);
    GivePlayerWeapon(params[0],24,200);
   	static const fmt_jailed[] = "Администратор %s посадил в тюрьму игрока %s на %d минут. Причина: %s";
	new str[sizeof(fmt_jailed)+(-2+MAX_PLAYER_NAME)+(-2+MAX_PLAYER_NAME)+(-2+3)+(-2+24)];
	format(str,sizeof(str),fmt_jailed,player_info[playerid][name],player_info[params[0]][name],params[1],params[2]);
	SCMTA(COLOR_RED,str);
	SPD(params[0],DLG_STYLE_MUTED,DIALOG_STYLE_MSGBOX,"{FFFFFF}Тюрьма","{FF0000}Вас посадили в тюрьму!\n{FFFFFF}Если вы не согласны с решением администратора, используйте команду {FF0000}/jailreport","Закрыть","");
	return 1;
}


CMD:mutereport(playerid)
{
	if(player_info[playerid][muted]==0) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}У вас нет мута!");
	SPD(playerid,DLG_MUTEERR,DIALOG_STYLE_INPUT,"{FFFFFF}Анти-{FF0000}Mute","\t\t{FF0000}Примечания\n- Не используйте нецензурную лексику(Mute +10)\n- Не оскорбляйте администрацию(Mute +100|Ban)\n- Не используйте CAPSLOCK\n\n{FFFFFF}Расскажите, как вы видите эту ситуацию:","Далее","Отмена");
	return 1;
}
CMD:jailreport(playerid)
{
    if(player_info[playerid][jailed]==0) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Вы не находитесь в тюрьме!");
    SPD(playerid,DLG_JAILERR,DIALOG_STYLE_INPUT,"{FFFFFF}Анти-{FF0000}Jail","\t\t{FF0000}Примечания\n- Не используйте нецензурную лексику(Mute +10)\n- Не оскорбляйте администрацию(Mute +100|Ban)\n- Не используйте CAPSLOCK\n\n{FFFFFF}Расскажите, как вы видите эту ситуацию:","Далее","Отмена");
    return 1;
}



CMD:unjail(playerid,params[])
{
    if(player_info[playerid][admin]<3) return 1;
	if(temp_info[playerid][aLogin]==false) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Вы не авторизовались как администратор!");
	if(sscanf(params,"ds[36]",params[0],params[1])) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Используйте /unjail [id] [причина]");
	if(params[0]==INVALID_PLAYER_ID) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Неверный id");
	if(!IsPlayerConnected(params[0])) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Игрок не найден!");
	if(player_info[params[0]][jailed]==0) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Игрок не находится в тюрьме!");
	if(strlen(params[1])<=2||strlen(params[1])>=36) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Причина не может быть больше 35 и меньше 2 символов!");
	query[0]=EOS;
    mysql_format(dbHandle,query,sizeof(query),"UPDATE `accounts` SET `jailed` = '%d' WHERE `id` = '%d'",0,player_info[params[0]][id]);
    mysql_query(dbHandle,query);
    player_info[params[0]][jailed]=0;
   	static const fmt_unjailed[] = "Администратор %s выпустил игрока %s. Причина: %s";
	new str[sizeof(fmt_unjailed)+(-2+MAX_PLAYER_NAME)+(-2+MAX_PLAYER_NAME)+(-2+24)];
	format(str,sizeof(str),fmt_unjailed,player_info[playerid][name],player_info[params[0]][name],params[1]);
	SCMTA(COLOR_RED,str);
	return OnPlayerSpawn(params[0]);
}

CMD:unfreeze(playerid,params[])
{
	if(player_info[playerid][admin]==0) return 1;
	if(sscanf(params,"d",params[0])) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Используйте /unfreeze [id]");
    DeletePVar(playerid, "Freeze");
    new str[100];
    format(str,sizeof(str),"Администратор %s разморозил игрока %s",player_info[playerid][name],player_info[params[0]][name]);
    SAM(COLOR_GREY,str);
	TogglePlayerControllable(params[0], 1);
	return 1;
}

CMD:tempskin(playerid, params[])
{
    new tempstring[256];
    if(player_info[playerid][admin] < 3) return 1;
    if(pLogin[playerid] != true) return SCM(playerid, COLOR_GREY, "Вы не можете сейчас использовать команды.");
    if(temp_info[playerid][aLogin] == false) return SCM(playerid, COLOR_GREY, "Вы не авторизовались как администратор.");
    if(sscanf(params, "dd", params[0], params[1])) return SCM(playerid, COLOR_GREY, "Используйте /tempskin [id игрока] [id скина]");
	if(params[0] < 0 || params[0] > 999) return SCM(playerid, COLOR_GREY, "Вы ввели неверный ID игрока.");
	if(!IsPlayerConnected(params[0])) return SCM(playerid,COLOR_RED,"[Ошибка!]: {FFFFFF}Игрок не авторизован");
	if(params[1] < 1 || params[1] > 311) return SCM(playerid, COLOR_GREY, "Вы ввели неверный ID скина(от 1 до 311).");
	new pid = params[0];
 	SetPlayerSkin(pid, params[1]);
	format(tempstring, sizeof(tempstring), "{00FF00}[TEMPSKIN]: Администратор %s[%i] установил временный скин игроку %s[%i]", player_info[playerid][name], playerid, params[1], player_info[pid][name], pid);
	SAM(COLOR_GREY, tempstring);
	format(tempstring, sizeof(tempstring), "Администратор %s[%i] установил вам временный скин.", player_info[playerid][name], playerid);
	SCM(pid, COLOR_WHITE, tempstring);
	return 1;
}

CMD:ahelp(playerid)
{
	if(player_info[playerid][admin] < 1) return 1;
    if(pLogin[playerid] != true) return SCM(playerid, COLOR_GREY, "Вы не можете сейчас использовать команды.");
    if(temp_info[playerid][aLogin] == false) return SCM(playerid, COLOR_GREY, "Вы не авторизовались как администратор.");
    switch(player_info[playerid][admin])
    {
		case 1: SPD(playerid, DLG_AHELP, DIALOG_STYLE_LIST, "Команды администратора", "1 уровень", "Выбрать", "Отмена");
		case 2: SPD(playerid, DLG_AHELP, DIALOG_STYLE_LIST, "Команды администратора", "1 уровень\n2 уровень", "Выбрать", "Отмена");
        case 3: SPD(playerid, DLG_AHELP, DIALOG_STYLE_LIST, "Команды администратора", "1 уровень\n2 уровень\n3 уровень", "Выбрать", "Отмена");
		case 4: SPD(playerid, DLG_AHELP, DIALOG_STYLE_LIST, "Команды администратора", "1 уровень\n2 уровень\n3 уровень\n4 уровень", "Выбрать", "Отмена");
		case 5: SPD(playerid, DLG_AHELP, DIALOG_STYLE_LIST, "Команды администратора", "1 уровень\n2 уровень\n3 уровень\n4 уровень\n5 уровень", "Выбрать", "Отмена");
		case 6: SPD(playerid, DLG_AHELP, DIALOG_STYLE_LIST, "Команды администратора", "1 уровень\n2 уровень\n3 уровень\n4 уровень\n5 уровень\n6 уровень", "Выбрать", "Отмена");
		case 7: SPD(playerid, DLG_AHELP, DIALOG_STYLE_LIST, "Команды администратора", "1 уровень\n2 уровень\n3 уровень\n4 уровень\n5 уровень\n6 уровень\n7 уровень", "Выбрать", "Отмена");
	}
	return 1;
}

CMD:alogin(playerid)
{
	if(player_info[playerid][admin] < 1) return 1;
	if(GetPVarInt(playerid,"active")==0) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}У вас не установлен Админ-Пароль!");
	if(pLogin[playerid] != true) return SCM(playerid, COLOR_GREY, "Вы не можете сейчас использовать команды.");
	if(temp_info[playerid][aLogin] == true) return SCM(playerid, COLOR_RED, "[Ошибка!] Вы уже авторизовались как администратор.");
	SPD(playerid, DLG_ALOGIN, DIALOG_STYLE_PASSWORD, "{FFFFFF}Админ - авторизация", "{FFFFFF}Введите пароль для допуска к правам администратора:\n\n", "Ввести", "Выйти");
	return 1;
}

CMD:a(playerid, params[])
{
	new tempstring[256];
    if(player_info[playerid][admin] < 1) return 1;
    if(temp_info[playerid][aLogin] == false) return SCM(playerid, COLOR_RED, "[Ошибка!] {FFFFFF}Вы не авторизовались как администратор.");
    if(sscanf(params, "s[144]", params[0])) return SCM(playerid, COLOR_RED, "[Ошибка!] {FFFFFF}Используйте /a [текст сообщения]");
	format(tempstring, sizeof(tempstring), "[Aдминистратор %s %d-ого уровня]: %s",player_info[playerid][name] ,player_info[playerid][admin], params[0]);
	SendAdminMessage(COLOR_ACHAT, tempstring);
	return 1;
}


CMD:givegun(playerid,params[])
{
	if(player_info[playerid][admin]<2) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Отказано в доступе!");
	if(temp_info[playerid][aLogin] == false) return SCM(playerid, COLOR_RED, "[Ошибка!] {FFFFFF}Вы не авторизовались как администратор.");
	if(sscanf(params, "ddd", params[0],params[1],params[2])) return SCM(playerid, COLOR_RED, "[Ошибка!] {FFFFFF}Используйте /givegun [ID] [WeaponID] [Ammmo]");
	if(!IsPlayerConnected(params[0])) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Игрок не найден!");
	if(params[0]==INVALID_PLAYER_ID) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Неверный ID игрока");
	if(params[1]<=0||params[1]>=47) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Неверный ID оружия");
	if(params[2]==0||params[2]>=1000) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Неверное кол-во боеприпасов!");
	SetPVarInt(playerid,"gun",1);
	GivePlayerWeapon(params[0],params[1],params[2]);
	return 1;
}

CMD:apanel(playerid)
{
    if(player_info[playerid][admin] < 1) return 1;
    if(temp_info[playerid][aLogin] == false) return SCM(playerid, COLOR_RED, "[Ошибка!]: {FFFFFF}Вы не авторизовались как администратор.");
    switch(player_info[playerid][admin])
    {
    	case 1: SPD(playerid, DLG_APANEL, DIALOG_STYLE_LIST, "{ff9300}Админ панель", "{ffffff}1. Администраторы в сети", "Выбрать", "Выйти");
    	case 2: SPD(playerid, DLG_APANEL, DIALOG_STYLE_LIST, "{ff9300}Админ панель", "{ffffff}1. Администраторы в сети\n2. Админский GM", "Выбрать", "Выйти");
    	case 3: SPD(playerid, DLG_APANEL, DIALOG_STYLE_LIST, "{ff9300}Админ панель", "{ffffff}1. Администраторы в сети\n2. Админский GM", "Выбрать", "Выйти");
    	case 4: SPD(playerid, DLG_APANEL, DIALOG_STYLE_LIST, "{ff9300}Админ панель", "{ffffff}1. Администраторы в сети\n2. Админский GM", "Выбрать", "Выйти");
    	case 5: SPD(playerid, DLG_APANEL, DIALOG_STYLE_LIST, "{ff9300}Админ панель", "{ffffff}1. Администраторы в сети\n2. Админский GM", "Выбрать", "Выйти");
    	case 6: SPD(playerid, DLG_APANEL, DIALOG_STYLE_LIST, "{ff9300}Админ панель", "{ffffff}1. Администраторы в сети\n2. Админский GM", "Выбрать", "Выйти");
    	case 7: SPD(playerid, DLG_APANEL, DIALOG_STYLE_LIST, "{ff9300}Админ панель", "{ffffff}1. Администраторы в сети\n2. Админский GM", "Выбрать", "Выйти");
    	
	}
	return 1;
}

CMD:gps(playerid)
{
	SPD(playerid,DLG_GPS,DIALOG_STYLE_LIST,"{FFFFFF}GPS","{FF0000}1. {FFFFFF}Важные места\n{FF0000}2. {FFFFFF}Работы\n{FF0000}3. {FFFFFF}Прочее","Далее","Выход");
}

CMD:reportlist(playerid)
{
    if(player_info[playerid][admin] < 1) return 1;
    if(pLogin[playerid] != true) return SCM(playerid, COLOR_RED, "[Ошибка!]: {FFFFFF}Вы не можете сейчас использовать команды.");
    if(temp_info[playerid][aLogin] == false) return SCM(playerid, COLOR_RED, "[Ошибка!]: {FFFFFF}Вы не авторизовались как администратор.");
    ShowReports(playerid);
    return 1;
}


CMD:skick(playerid, params[])
{
	new tempstring[180];
	if(player_info[playerid][admin]<2) return 1;
	if(temp_info[playerid][aLogin]==false) return SCM(playerid, COLOR_RED, "[Ошибка!]: {FFFFFF}Вы не авторизовались как администратор.");
	if(sscanf(params, "ds[64]", params[0], params[1])) return SCM(playerid, COLOR_RED, "{00FF00}[Подсказка]: {FFFFFF}Используйте /skick [id игрока] [причина]");
    if(pLogin[params[0]] != true) return SCM(playerid, COLOR_RED, "[Ошибка!]: {FFFFFF}Игрок не авторизован.");
	if(strlen(params[1]) > 64) return SCM(playerid, COLOR_RED, "{00FF00}[Подсказка]: {FFFFFF}Причина не должна быть длинее 64 символов.");
	new idx = params[0];
	format(tempstring, sizeof(tempstring), "Администратор %s[%d] тихо кикнул игрока %s[%d]. Причина: %s", player_info[playerid][name], playerid, player_info[idx][name], idx, params[1]);
	SAM(COLOR_RED, tempstring);
	format(tempstring, sizeof(tempstring), "Вы были кикнуты администратором %s[%d]. Причина: %s", player_info[playerid][name], playerid, params[1]);
	SCM(idx, COLOR_RED, tempstring);
	return Kick(params[0]);
}

CMD:ban(playerid,params[])
{
	new tempstring[180];
	new yz,mz,dz;
	new unbandatep[11];
	if(player_info[playerid][admin]<4) return 1;
	if(temp_info[playerid][aLogin]==false) return SCM(playerid, COLOR_RED, "[Ошибка!]: {FFFFFF}Вы не авторизовались как администратор.");
	if(sscanf(params, "dds[64]", params[0],params[1] ,params[2])) return SCM(playerid, COLOR_RED, "{00FF00}[Подсказка]: {FFFFFF}Используйте /ban [id игрока] [кол-во дней] [причина]");
	if(params[0]<0||params[0]>999) return SCM(playerid,COLOR_RED,"[Ошибка!]: {FFFFFF}Вы  ввели неверный ID");
	if(player_info[params[0]][admin]>=1) return SCM(playerid,COLOR_RED,"[Ошибка!]: {FFFFFF}Вы  не можете забанить администратора!");
	if(strlen(params[2]) > 64) return SCM(playerid, COLOR_RED, "{00FF00}[Подсказка]: {FFFFFF}Причина не должна быть длинее 64 символов.");
	if(params[1]<1||params[1]>30) return SCM(playerid,COLOR_RED,"{00FF00}[Подсказка]:{FFFFFF}Кол-во дней может быть не меньше 1 и не больше 30");
	if(!IsPlayerConnected(params[0])) return SCM(playerid,COLOR_RED,"[Ошибка!]: {FFFFFF}Игрок не авторизован");
	new idx = params[0];
	new sec = gettime()+params[1]*86400;
	format(tempstring, sizeof(tempstring), "Администратор %s[%d] забанил игрока %s[%d] на %d дней. Причина: %s", player_info[playerid][name], playerid, player_info[idx][name], idx,params[1] ,params[2]);
	SCMTA(COLOR_RED, tempstring);
	format(tempstring, sizeof(tempstring), "Вы были забанены администратором %s[%d] на %d дней. Причина: %s", player_info[playerid][name], playerid,params[1],params[1] ,params[2]);
	SCM(idx, COLOR_RED, tempstring);
	timestamp(sec,yz,mz,dz);
	format(unbandatep,11,"%d.%d.%d",dz,mz,yz);
	query[0] = EOS;
	mysql_format(dbHandle, query, sizeof(query), "INSERT INTO `banlist` (`name`, `unbandate`, `unbantime`, `banreason`, `whoban`) VALUES ('%e', '%e', '%d', '%e', '%e')", player_info[idx][name], unbandatep, sec, params[2], player_info[playerid][name]);
	mysql_tquery(dbHandle, query);
	player_info[playerid][isban]=1;
	SaveAccount(playerid);
	return Kick(params[0]);
}

CMD:goto(playerid, params[])
{
		if(player_info[playerid][admin]==1) return 1;
		if(temp_info[playerid][aLogin]==false) return SCM(playerid, COLOR_RED, "[Ошибка!]: {FFFFFF}Вы не авторизовались как администратор.");
        if(sscanf(params,"d",params[0])) return SendClientMessage(playerid, 0xA3A3A3FF, "{00FF00}[Подсказка]: {FFFFFF}Используйте: /goto [Ид игрока]");
        if(!IsPlayerConnected(params[0])) return SCM(playerid,COLOR_RED,"[Ошибка!]: {FFFFFF}Игрок не авторизован");
        new Float:x,Float:y,Float:z;
        new intid;
        GetPlayerPos(params[0], x, y, z);
        intid = GetPlayerInterior(params[0]);
        SetPlayerInterior(playerid, intid);
        SetPlayerPos(playerid, x+2, y, z);
        new string[128];
        format(string, 128, "Администратор %s телепортировался к вам!", player_info[playerid][name]);
        SendClientMessage(params[0], COLOR_GREY, string);
        format(string, 128, "Вы были перемещены к игроку %s", player_info[params[0]][name]);
        SendClientMessage(playerid, COLOR_GREY, string);
        return 1;
}

CMD:gethere(playerid, params[])
{
        if(player_info[playerid][admin]==1) return 1;
        if(temp_info[playerid][aLogin]==false) return SCM(playerid, COLOR_RED, "[Ошибка!]: {FFFFFF}Вы не авторизовались как администратор.");
        if(sscanf(params,"d",params[0])) return SendClientMessage(playerid, 0xA3A3A3FF, "{00FF00}[Подсказка]: {FFFFFF}Используйте: /gethere [Ид игрока]");
        if(!IsPlayerConnected(params[0])) return SCM(playerid,COLOR_RED,"[Ошибка!]: {FFFFFF}Игрок не авторизован");
        new Float:x,Float:y,Float:z;
        new intid;
        GetPlayerPos(playerid, x, y, z);
        intid = GetPlayerInterior(playerid);
        SetPlayerInterior(params[0], intid);
        SetPlayerPos(params[0], x+2, y, z);
        new string[128];
        format(string, 128, "Администратор %s телепортировал вас к себе", player_info[playerid][name]);
        SendClientMessage(params[0], COLOR_GREY, string);
        format(string, 128, "Вы телепортировали игрока %s", player_info[params[0]][name]);
        SendClientMessage(playerid, COLOR_GREY, string);
        return 1;
}

//стоки
stock timestamp(unix_timestamp = 0, & year = 1970, & month = 1, & day = 1, & hour = 0, & minute = 0, & second = 0 )
{
	year = unix_timestamp / 31557600;
	unix_timestamp -= year * 31557600;
	year += 1970;
	if ( year % 4 == 0 ) unix_timestamp -= 21600;
	day = unix_timestamp / 86400;
	switch ( day )
	{
		case 0..30 : { second = day; month = 1; }
		case 31..58 : { second = day - 31; month = 2; }
		case 59..89 : { second = day - 59; month = 3; }
		case 90..119 : { second = day - 90; month = 4; }
		case 120..150 : { second = day - 120; month = 5; }
		case 151..180 : { second = day - 151; month = 6; }
		case 181..211 : { second = day - 181; month = 7; }
		case 212..242 : { second = day - 212; month = 8; }
		case 243..272 : { second = day - 243; month = 9; }
		case 273..303 : { second = day - 273; month = 10; }
		case 304..333 : { second = day - 304; month = 11; }
		case 334..366 : { second = day - 334; month = 12; }
	}
	unix_timestamp -= day * 86400;
	hour = unix_timestamp / 3600;
	unix_timestamp -= hour * 3600;
	minute = unix_timestamp / 60;
	unix_timestamp -= minute * 60;
	day = second + 1;
	second = unix_timestamp;
}

stock set_money(playerid, moneys)
{
	new string[55];
	if(moneys > 0)
	{
		player_info[playerid][money] += moneys;
		format(string, sizeof(string), "~n~~n~~n~~n~~n~~n~~g~+%d$", moneys);
		PlayerPlaySound(playerid, 1083, 0.0, 0.0, 0.0);
	}
	else if(moneys < 0)
	{
		player_info[playerid][money] -= moneys;
		format(string, sizeof(string), "~n~~n~~n~~n~~n~~n~~r~+%d$", moneys);
		PlayerPlaySound(playerid, 1085, 0.0, 0.0, 0.0);
	}
	GameTextForPlayer(playerid, string, 1000, 3);
	ResetPlayerMoney(playerid);
	GivePlayerMoney(playerid, player_info[playerid][money]);
	return 1;
}

stock ShowStats(playerid)
{
	new tempstring[256+MAX_PLAYER_NAME];
	new temps[7], tempr[14];
	switch(player_info[playerid][gender])
	{
		case 1: strins(temps, "Мужской", 0);
		case 2: strins(temps, "Женский", 0);
	}
	switch(player_info[playerid][race])
	{
		case 1: strins(tempr, "Европиоидная", 0);
		case 2: strins(tempr, "Негроидная", 0);
		case 3: strins(tempr, "Монголоидная", 0);
	}
	format(tempstring, sizeof(tempstring), "{ffffff}\tИмя: {FF0000}[%s]\t\t\n\t{FFFFFF}Пол: {FF0000}[%s]\t\t\n\t{FFFFFF}Деньги: {FF0000}[%d]{FF0000}\t\t\n\t{FFFFFF}Возраст: {FF0000}[%d] лет\t\t\n\t{FFFFFF}Уровень: {FF0000}[%d] lvl\t\t\n\t{FFFFFF}EXP: {FF0000}[%d]{FF0000}", player_info[playerid][name],temps,player_info[playerid][money],player_info[playerid][age], player_info[playerid][level],player_info[playerid][exp]);
	SPD(playerid, DLG_MENU_STAT, DIALOG_STYLE_MSGBOX, "{ff9300}Статистика персонажа", tempstring, "Назад", "Закрыть");
}

stock SendAdminMessage(color, const stringadm[])
{
  	foreach(new i : Admins) SCM(i,color,stringadm);
	return 1;
}

stock OnlineAdmins(playerid)
{
	new tempstr[128];
	new temps[21];
    foreach(Player, i)
	{
	    if(pLogin[i] == true)
		{
			if(player_info[i][admin] > 0)
			{
       			switch(temp_info[i][aLogin])
				{
					case true: strins(temps, "Авторизован", 0);
					case false: strins(temps, "Не авторизован", 0);
				}
			    format(tempstr, sizeof(tempstr), "%s[%i] - %d уровень - %s", player_info[i][name], i, player_info[i][admin], temps);
				SCM(playerid, COLOR_GREY, tempstr);
			}
		}
	}
}

ReportCMD(playerid)
{
	if(temp_info[playerid][report] == true) return SCM(playerid, COLOR_RED, "[Ошибка!]: {FFFFFF}Вы уже написали сообщение администрации, ожидайте ответа.");
	SPD(playerid, DLG_REPORT, DIALOG_STYLE_INPUT, "{ff9300}Связь с администрацией", "{ffffff}Напишите свой вопрос или жалобу и вам ответит администратор сервера.", "Ввод", "Выйти");
	return 1;
}

stock ReportOn(playerid)
{
	temp_info[playerid][report] = true;
}

stock ShowReports(playerid)
{
	new tempstr[1024];
	foreach(Player, i)
	{
	    if(reporttime[i] > 0)
	    {
	        new time = gettime() - reporttime[i];
	        format(tempstr, sizeof(tempstr), "%s %s[%i] - прошло %d с.\n",tempstr,player_info[i][name],i,time);
	    }
	    if(strlen(tempstr) > 0)
	    {
	        SPD(playerid, DLG_REP_LIST, DIALOG_STYLE_LIST, "{FFFFFF}Список жалоб", tempstr, "Выбрать", "Закрыть");
	    }
	}
}

stock ShowConfig(playerid)
{
	new tempstr[256];
	new iemail[60];
	new isbox[15];
	switch(player_info[playerid][isemail])
	{
	    case 0: strins(iemail, "{FF0000}Не указан", 0);
	    case 1: strins(iemail, player_info[playerid][email], 0);
	}
	switch(player_info[playerid][box])
	{
	    case 0: strins(isbox,"{FF0000}Выключен",0);
	    case 1: strins(isbox,"{00FF00}Включен",0);
	}
	format(tempstr, sizeof(tempstr), "{ffffff}1. Email: %s\n2. Кейс: %s", iemail,isbox);
	SPD(playerid, DLG_MENU_CONFIG, DIALOG_STYLE_LIST, "{FF00FF}1. {FFFFFF}Основные настройки", tempstr, "Выбрать","Отмена");
}

stock ProxDetector(Float:radi, playerid, string[],col1,col2,col3,col4,col5)
{
	new Float:posx;new Float:posy;new Float:posz;new Float:oldposx;new Float:oldposy;new Float:oldposz;new Float:tempposx;new Float:tempposy;new Float:tempposz;
	GetPlayerPos(playerid, oldposx, oldposy, oldposz);
	foreach(new i: Player)
	{
		if(IsPlayerConnected(i))
		{
		    if(GetPlayerVirtualWorld(playerid) == GetPlayerVirtualWorld(i))
			{
				GetPlayerPos(i, posx, posy, posz);
				tempposx = (oldposx -posx);
				tempposy = (oldposy -posy);
				tempposz = (oldposz -posz);
				if(((tempposx < radi/16) && (tempposx > -radi/16)) && ((tempposy < radi/16) && (tempposy > -radi/16)) && ((tempposz < radi/16) && (tempposz > -radi/16))) SCM(i, col1, string);
				else if(((tempposx < radi/8) && (tempposx > -radi/8)) && ((tempposy < radi/8) && (tempposy > -radi/8)) && ((tempposz < radi/8) && (tempposz > -radi/8))) SCM(i, col2, string);
				else if(((tempposx < radi/4) && (tempposx > -radi/4)) && ((tempposy < radi/4) && (tempposy > -radi/4)) && ((tempposz < radi/4) && (tempposz > -radi/4))) SCM(i, col3, string);
				else if(((tempposx < radi/2) && (tempposx > -radi/2)) && ((tempposy < radi/2) && (tempposy > -radi/2)) && ((tempposz < radi/2) && (tempposz > -radi/2))) SCM(i, col4, string);
				else if(((tempposx < radi) && (tempposx > -radi)) && ((tempposy < radi) && (tempposy > -radi)) && ((tempposz < radi) && (tempposz > -radi))) SCM(i, col5, string);
			}
		}
	}
	return 1;
}

stock ShowFirstLevelCMD(playerid)
{
    new tempstr[512];
	format(tempstr, sizeof(tempstr), "{FFFF00}/ahelp{FFFFFF} - команды администратора\n{FFFF00}/a{FFFFFF} - админский чат\n{FFFF00}/apanel{FFFFFF} - панель администратора\n{FFFF00}/reportlist{FFFFFF} - список репортов\n{FFFF00}/re{FFFFFF} - Следить за игроком\n{FFFF00}/reoff{FFFFFF} - Перестать следить за игроком\n{FFFF00}/slap - {FFFFFF}подкинуть игрока\n{FFFF00}/freeze{FFFFFF} - Заморозить игрока\n{FFFF00}/unfreeze{FFFFFF} - Разморозить игрока\n{FFFF00}/pm - {FFFFFF}Отправить сообщение игроку");
	SPD(playerid, DLG_AHELP_CMD, DIALOG_STYLE_MSGBOX, "Команды 1 уровня", tempstr, "Далее", "Выход");
}

stock ShowSecondLevelCMD(playerid)
{
    new tempstr[512];
	format(tempstr, sizeof(tempstr), "{FFFF00}/kick{FFFFFF} - Кикнуть игрока\n{FFFF00}/skick{FFFFFF} - тихо кикнуть игрока\n{FFFF00}/goto{FFFFFF} - Телепортироваться к игроку\n{FFFF00}/gethere{FFFFFF} - Телепортировать игрока к себе\n{FFFF00}/trollmusic - {FFFFFF}включить музыку игроку\n{FFFF00}/givegun {FFFFFF}- Выдать оружие игроку\n{FFFF00}/delgun{FFFFFF} - Очистить оружие игроку\n{FFFF00}/mute{FFFFFF} - Заглушить игрока");
	SPD(playerid, DLG_CMD2, DIALOG_STYLE_MSGBOX, "Команды 2 уровня", tempstr, "Выход", "");
}

stock ShowThirdLevelCMD(playerid)
{
    new tempstr[512];
	format(tempstr, sizeof(tempstr), "{FFFF00}/tempskin{FFFFFF} - выдать временный скин\n{FFFF00}/sethp{FFFFFF} - установить здоровье\n{FFFF00}/unmute{FFFFFF} - Снять заглушку с игрока");
	SPD(playerid, DLG_CMD3, DIALOG_STYLE_MSGBOX, "Команды 3 уровня", tempstr, "Выход", "");
}

stock ShowFourLevelCMD(playerid)
{
    new tempstr[512];
	format(tempstr, sizeof(tempstr), "{FFFF00}/setskin{FFFFFF} - выдать постоянный скин\n{FFFF00}/ban{FFFFFF} - забанить игрока\n{FFFF00}/unban{FFFFFF} - разбанить игрока");
	SPD(playerid, DLG_CMD4, DIALOG_STYLE_MSGBOX, "Команды 4 уровня", tempstr, "Выход", "");
}

stock ShowFiveLevelCMD(playerid)
{
    new tempstr[512];
	format(tempstr, sizeof(tempstr), "{FFFF00}/givemoney{FFFFFF} - выдать деньги игроку\n{FFFF00}/setlevel{FFFFFF} - установить уровень игроку");
	SPD(playerid, DLG_CMD5, DIALOG_STYLE_MSGBOX, "Команды 5 уровня", tempstr, "Выход", "");
}

stock ShowSixLevelCMD(playerid)
{
    new tempstr[512];
	format(tempstr, sizeof(tempstr), "{FFFF00}/setadmin{FFFFFF} - Выдать админку");
	SPD(playerid, DLG_CMD6, DIALOG_STYLE_MSGBOX, "Команды 6 уровня", tempstr, "Выход", "");
}

stock ShowSevenLevelCMD(playerid)
{
    new tempstr[512];
	format(tempstr, sizeof(tempstr), "{FFFF00}/removeadmin{FFFFFF} - Снять админку");
	SPD(playerid, DLG_CMD7, DIALOG_STYLE_MSGBOX, "Команды 7 уровня", tempstr, "Выход", "");
}

forward CheckAccountInBan(playerid);
public CheckAccountInBan(playerid)
{
 	if(cache_num_rows() == 1)
	{
	    cache_get_value_name(0, "unbandate", ban_info[playerid][unbandate], 11);
	    cache_get_value_name_int(0, "unbantime", ban_info[playerid][unbantime]);
	    cache_get_value_name(0, "banreason", ban_info[playerid][banreason], 64);
	    cache_get_value_name(0, "whoban", ban_info[playerid][whoban], 30);
	    if(ban_info[playerid][unbantime] > gettime())
		{
			new tempstr[256];
			format(tempstr, sizeof(tempstr), "{FFFFFF}Ваш аккаунт заблокирован до [%s]\nПричина блокировки: [%s]\nНик администратора, который выдал бан: [%s]\n\nЕсли вы не согласны с решением администратора\nподайте жалобу на форум.\n", ban_info[playerid][unbandate], ban_info[playerid][banreason], ban_info[playerid][whoban]);
		    SPD(playerid, DLG_BAN, DIALOG_STYLE_MSGBOX, "{FF0000}Ошибка входа", tempstr, "Выход", "");
		    SCM(playerid, COLOR_RED, "Введите /q чтобы выйти из игры");
		    SetTimerEx("newkick", 1000, false, "i", playerid);
		}
		else
		{
		    query[0] = EOS;
			mysql_format(dbHandle, query, sizeof(query), "DELETE FROM `banlist` WHERE `name` = '%e'", player_info[playerid][name]);
			mysql_tquery(dbHandle, query);
			query[0] = EOS;
			mysql_format(dbHandle, query, sizeof(query), "UPDATE `accounts` SET `isban` = '%d'  WHERE `name` = '%e'", 0 ,player_info[playerid][name]);
			mysql_tquery(dbHandle, query);
		}
	}
}


forward kickk(playerid);
public kickk(playerid)
{
	return Kick(playerid);
}

CMD:kick(playerid,params[])
{
	if(player_info[playerid][admin] < 2) return 1;
    if(pLogin[playerid] != true) return SCM(playerid, COLOR_GREY, "Вы не можете сейчас использовать команды.");
    if(temp_info[playerid][aLogin] == false) return SCM(playerid, COLOR_RED, "[Ошибка!] {FFFFFF}Вы не авторизовались как администратор.");
	if(sscanf(params, "ds[24]", params[0], params[1])) return SCM(playerid, COLOR_RED, "{00FF00}[Подсказка] {FFFFFF}Используйте /kick [id игрока] [причина]");
	if(player_info[params[0]][admin]>=6) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Вы не можете кикнуть основателя!");
	if(params[0] < 0 || params[0] > 999) return SCM(playerid, COLOR_RED, "[Ошибка!] {FFFFFF}Вы ввели неверный ID игрока.");
 	if(!IsPlayerConnected(params[0])) return SendClientMessage(playerid, -1, "{FF0000}[Ошибка!] {FFFFFF}Игрок не найден!");
	if(strlen(params[1]) > 24) return SCM(playerid, COLOR_RED, "{00FF00}[Подсказка] {FFFFFF}Причина не должна быть длинее 24 символов.");
	static const fmt_kicked[] = "{FF0000}Администратор %s кикнул игрока %s. Причина: %s";
	new str[sizeof(fmt_kicked)+MAX_PLAYER_NAME+MAX_PLAYER_NAME+24-2*3];
	format(str,sizeof(str),fmt_kicked,player_info[playerid][name],player_info[params[0]][name],params[1]);
	SCMTA(COLOR_RED,str);
	return Kick(params[0]);
}


CMD:mute(playerid,params[])
{
	if(player_info[playerid][admin]<2) return 1;
	if(temp_info[playerid][aLogin] == false) return SCM(playerid, COLOR_RED, "[Ошибка!] {FFFFFF}Вы не авторизовались как администратор.");
	if(sscanf(params,"dds[24]",params[0],params[1],params[2])) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Используйте /mute [id] [минуты] [причина]");
	if(params[0]==INVALID_PLAYER_ID) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Неверный id");
	if(!IsPlayerConnected(params[0])) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Игрок не найден!");
	if(params[1]==0||params[1]>600) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Неверное кол-во минут!");
	if(player_info[params[0]][muted]!=0) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}У игрока уже заблокирован чат!");
	if(strlen(params[2])<2||strlen(params[2])>24) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Причина не может быть меньше 2 и больше 24 символов");
	query[0]=EOS;
    mysql_format(dbHandle,query,sizeof(query),"UPDATE `accounts` SET `muted` = '%d' WHERE `id` = '%d'",params[1],player_info[params[0]][id]);
    mysql_query(dbHandle,query);
	player_info[params[0]][muted]=params[1]*60000;
	static const fmt_muted[] = "Администратор %s заблокировал чат игроку %s на %d минут. Причина: %s";
	new str[sizeof(fmt_muted)+(-2+MAX_PLAYER_NAME)+(-2+MAX_PLAYER_NAME)+(-2+3)+(-2+24)];
	format(str,sizeof(str),fmt_muted,player_info[playerid][name],player_info[params[0]][name],params[1],params[2]);
	SCMTA(COLOR_RED,str);
	SPD(params[0],DLG_STYLE_MUTED,DIALOG_STYLE_MSGBOX,"{FFFFFF}Блокировка чата","{FF0000}Вы получили блокировку чата!\n{FFFFFF}Если вы не согласны с решением администратора, используйте команду {FF0000}/mutereport","Закрыть","");
	return 1;
}

CMD:unmute(playerid,params[])
{
	if(player_info[playerid][admin]<3) return 1;
	if(temp_info[playerid][aLogin] == false) return SCM(playerid, COLOR_RED, "[Ошибка!] {FFFFFF}Вы не авторизовались как администратор.");
	if(sscanf(params,"ds[36]",params[0],params[1])) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Используйте /unmute [id] [причина]");
	if(params[0]==INVALID_PLAYER_ID) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Неверный id");
	if(!IsPlayerConnected(params[0])) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Игрок не найден!");
	if(strlen(params[1])<5||strlen(params[1])>35) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Причина не может быть меньше 5 и больше 30 символов");
	query[0]=EOS;
    mysql_format(dbHandle,query,sizeof(query),"UPDATE `accounts` SET `muted` = '%d' WHERE `id` = '%d'",0,player_info[params[0]][id]);
    mysql_query(dbHandle,query);
	player_info[params[0]][muted]=0;
	static const fmt_unmuted[] = "Администратор %s разблокировал чат игроку %s. Причина: %s";
	new str[sizeof(fmt_unmuted)+(-2+MAX_PLAYER_NAME)+(-2+MAX_PLAYER_NAME)+(-2+24)];
	format(str,sizeof(str),fmt_unmuted,player_info[playerid][name],player_info[params[0]][name],params[1]);
	SCMTA(COLOR_RED,str);
	return 1;
}

CMD:delgun(playerid,params[])
{
	if(player_info[playerid][admin] < 3) return 1;
	if(sscanf(params,"d",params[0])) return SCM(playerid,COLOR_RED,"[Ошибка!] {FFFFFF}Используйте /delgun [ID игрока]");
	ResetPlayerWeapons(params[0]);
	static const fmt_delgun[]="Администратор %s удалил оружие игроку %s";
	new dstr[sizeof(fmt_delgun)+(-2+MAX_PLAYER_NAME)+(-2+MAX_PLAYER_NAME)];
	format(dstr,sizeof(dstr),fmt_delgun,player_info[playerid][name],player_info[params[0]][name]);
	SAM(COLOR_GREY,dstr);
	return 1;
}

CMD:slap(playerid,params[])
{
	if(player_info[playerid][admin] < 1) return 1;
    if(pLogin[playerid] != true) return 1;
    if(temp_info[playerid][aLogin] == false) return SCM(playerid, COLOR_RED, "[Ошибка!] {FFFFFF}Вы не авторизовались как администратор.");
    if(sscanf(params, "d", params[0])) return SCM(playerid, COLOR_RED, "{00FF00}[Подсказка] {FFFFFF}Используйте /slap [ID игрока]");
    new Float:x, Float:y, Float:z;
    GetPlayerPos(params[0], x, y, z);
    SetPlayerPos(params[0],x,y,z+5);
    new slap[29+(-2+MAX_PLAYER_NAME)];
    new admslap[35+(-2+MAX_PLAYER_NAME)+(-2+MAX_PLAYER_NAME)];
    format(slap,sizeof(slap),"Администратор %s подкинул вас",player_info[playerid][name]);
    SCM(params[0],COLOR_GREY,slap);
    format(admslap,sizeof(admslap),"Администратор %s подкинул игрока %s",player_info[playerid][name],player_info[params[0]][name]);
    SAM(COLOR_GREY,admslap);
    return 1;
}

CMD:unban(playerid,params[])
{
	if(player_info[playerid][admin] < 4) return 1;
    if(pLogin[playerid] != true) return 1;
    if(temp_info[playerid][aLogin] == false) return SCM(playerid, COLOR_RED, "[Ошибка!] {FFFFFF}Вы не авторизовались как администратор.");
	if(sscanf(params, "s[30]", params[0])) return SCM(playerid, COLOR_RED, "{00FF00}[Подсказка] {FFFFFF}Используйте /unban [Имя игрока]");
 	if(strlen(params[0]) < 0 || strlen(params[0]) > 30) return SCM(playerid, COLOR_GREY, "Длина ника должна быть не больше 30 и не меньше 0 символов.");
	strins(temp_info[playerid][admunban], params[0], 0);
	query[0] = EOS;
	mysql_format(dbHandle, query, sizeof(query), "SELECT * FROM `banlist` WHERE `name` = '%e'", params[0]);
	mysql_tquery(dbHandle, query, "UnBanFunction", "i", playerid);
	return 1;
}


CMD:sban(playerid,params[])
{
    new tempstring[180];
	new yz,mz,dz;
	new unbandatep[11];
	if(player_info[playerid][admin]<4) return 1;
	if(temp_info[playerid][aLogin]==false) return SCM(playerid, COLOR_RED, "[Ошибка!]: {FFFFFF}Вы не авторизовались как администратор.");
	if(sscanf(params, "dds[64]", params[0],params[1] ,params[2])) return SCM(playerid, COLOR_RED, "{00FF00}[Подсказка]: {FFFFFF}Используйте /sban [id игрока] [кол-во дней] [причина]");
	if(params[0]<0||params[0]>999) return SCM(playerid,COLOR_RED,"[Ошибка!]: {FFFFFF}Вы  ввели неверный ID");
	if(player_info[params[0]][admin]>=1) return SCM(playerid,COLOR_RED,"[Ошибка!]: {FFFFFF}Вы  не можете забанить администратора!");
	if(strlen(params[2]) > 64) return SCM(playerid, COLOR_RED, "{00FF00}[Подсказка]: {FFFFFF}Причина не должна быть длинее 64 символов.");
	if(params[1]<1||params[1]>30) return SCM(playerid,COLOR_RED,"{00FF00}[Подсказка]:{FFFFFF}Кол-во дней может быть не меньше 1 и не больше 30");
	if(!IsPlayerConnected(params[0])) return SCM(playerid,COLOR_RED,"[Ошибка!]: {FFFFFF}Игрок не авторизован");
	new idx = params[0];
	new sec = gettime()+params[1]*86400;
	format(tempstring, sizeof(tempstring), "[SBAN]{FFFFFF}Администратор %s[%d] забанил игрока %s[%d] на %d дней. Причина: %s", player_info[playerid][name], playerid, player_info[idx][name], idx,params[1] ,params[2]);
	SAM(COLOR_RED, tempstring);
	format(tempstring, sizeof(tempstring), "Вы были забанены администратором %s[%d] на %d дней. Причина: %s", player_info[playerid][name], playerid,params[1],params[1] ,params[2]);
	SCM(idx, COLOR_RED, tempstring);
	timestamp(sec,yz,mz,dz);
	format(unbandatep,11,"%d.%d.%d",dz,mz,yz);
	query[0] = EOS;
	mysql_format(dbHandle, query, sizeof(query), "INSERT INTO `banlist` (`name`, `unbandate`, `unbantime`, `banreason`, `whoban`) VALUES ('%e', '%e', '%d', '%e', '%e')", player_info[idx][name], unbandatep, sec, params[2], player_info[playerid][name]);
	mysql_tquery(dbHandle, query);
	player_info[playerid][isban]=1;
	SaveAccount(playerid);
	SetTimer("kickk",500,false);
	return 1;
}

CMD:banoff(playerid,params[])
{
    new names[30], counts;
	if(player_info[playerid][admin]<4) return 1;
	if(temp_info[playerid][aLogin]==false) return SCM(playerid, COLOR_RED, "[Ошибка!]: {FFFFFF}Вы не авторизовались как администратор.");
	if(sscanf(params, "s[30]d", params[0],params[1])) return SCM(playerid, COLOR_RED, "{00FF00}[Подсказка]: {FFFFFF}Используйте /banoff [Имя игрока] [кол-во дней]");
	if(player_info[params[0]][admin]>=1) return SCM(playerid,COLOR_RED,"[Ошибка!]: {FFFFFF}Вы  не можете забанить администратора!");
	if(strlen(params[2]) > 64) return SCM(playerid, COLOR_RED, "{00FF00}[Подсказка]: {FFFFFF}Причина не должна быть длинее 64 символов.");
	if(params[1]<1||params[1]>30) return SCM(playerid,COLOR_RED,"{00FF00}[Подсказка]:{FFFFFF}Кол-во дней может быть не меньше 1 и не больше 30");
	query[0] = EOS;
	mysql_format(dbHandle, query, sizeof(query), "SELECT * FROM `accounts` WHERE `name` = '%s'", params[0]);
	mysql_tquery(dbHandle, query, "OffBanFunc", "isd", playerid, names, counts);
    return 1;
}

forward UnBanFunction(playerid);
public UnBanFunction(playerid)
{
	new rows;
	cache_get_row_count(rows);
	if(rows)
	{
 		new tempstring[27+(-2+MAX_PLAYER_NAME)];
		format(tempstring,sizeof(tempstring),"{FFFFFF}Игрок %s забанен\n",temp_info[playerid][admunban]);
		SPD(playerid,DLG_UNBAN,DIALOG_STYLE_MSGBOX,"{FFFFFF}Информация",tempstring,"Разбанить","Отмена");
	}
	else if(!rows)
	{
	    new tempstring[70+(-2+MAX_PLAYER_NAME)];
		format(tempstring,sizeof(tempstring),"{FFFF00}[Ошибка!]: {FFFFFF}Аккаунт игрока %s не находится в блокировке",temp_info[playerid][admunban]);
	    SCM(playerid,COLOR_GREY,tempstring);
	}
}

forward OffBanFunc(playerid, str[], count);
public OffBanFunc(playerid, str[], count)
{
 	new rows, tempstring[29+(-2+MAX_PLAYER_NAME)], inban;
	cache_get_row_count(rows);
    if(rows)
	{
	    cache_get_value_name_int(0, "isban", inban);
	    if(inban == 1)
	    {
	        format(tempstring, sizeof(tempstring), "Аккаунт %s уже заблокирован.", str);
			return SCM(playerid, COLOR_GREY, tempstring);
	    }
	    new yz, mz, dz;
		new unbandatep[11];
		new sec = gettime() + count * 86400;
		timestamp(sec, yz, mz, dz);
		format(unbandatep, 11, "%d.%d.%d", dz, mz, yz);
		strins(temp_info[playerid][ofname], str, 0);
		temp_info[playerid][ofcount] = count;
		temp_info[playerid][ofsec] = sec;
		strins(temp_info[playerid][ofdata], unbandatep, 0);
		SPD(playerid, DLG_OFFBAN, DIALOG_STYLE_INPUT, "{ff9300}Информация", "{ffffff}Введите причину блокировки аккаунта в поле ниже:\n", "Ввод", "");
	}
	else if(!rows)
	{
		format(tempstring, sizeof(tempstring), "Аккаунт %s не cуществует.", str);
		SCM(playerid, COLOR_GREY, tempstring);
	}
	return 1;
}


forward AFKSystem();
public AFKSystem()
{
    for(new playerid;playerid < GetMaxPlayers();playerid++)
    {
        if(IsPlayerConnected(playerid))
        {
            if(GetPVarInt(playerid, "PlayerInAFK") == 0) SetPVarInt(playerid, "PlayerInAFK", -1);
            else if(GetPVarInt(playerid, "PlayerInAFK") == -1)
            {
                SetPVarInt(playerid, "PlayerInAFK", 1);
                new string[56];
                format(string, sizeof(string), "АФК: {FFFFFF}%s", ConvertSeconds(GetPVarInt(playerid, "PlayerInAFK")));
                SetPlayerChatBubble(playerid, string, 0xFFFF00AA, 20.0, 1200);
            }
            else if(GetPVarInt(playerid, "PlayerInAFK") > 0)
            {
                new string[56];
                SetPVarInt(playerid, "PlayerInAFK", GetPVarInt(playerid, "PlayerInAFK")+1);
                format(string, sizeof(string), "АФК: {FFFFFF}%s", ConvertSeconds(GetPVarInt(playerid, "PlayerInAFK")));
                SetPlayerChatBubble(playerid, string, 0xFFFF00AA, 20.0, 1200);
            }
		}
    }
}

stock ConvertSeconds(time)
{
    new string[128];
    if(time < 60) format(string, sizeof(string), "%d секунд", time);
    else if(time == 60) string = "1 минуту";
    else if(time > 60 && time < 3600)
    {
        new Float: minutes;
        new seconds;
        minutes = time / 60;
        seconds = time % 60;
        format(string, sizeof(string), "%.0f минут и %d секунд", minutes, seconds);
    }
    else if(time == 3600) string = "1 час";
    else if(time > 3600)
    {
        new Float: hours;
        new minutes_int;
        new Float: minutes;
        new seconds;
        hours = time / 3600;
        minutes_int = time % 3600;
        minutes = minutes_int / 60;
        seconds = minutes_int % 60;
        format(string, sizeof(string), "%.0f:%.0f:%d", hours, minutes, seconds);
    }
    return string;
}

